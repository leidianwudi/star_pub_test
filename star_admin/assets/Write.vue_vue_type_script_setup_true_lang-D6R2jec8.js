var f=(i,u,o)=>new Promise((s,l)=>{var p=t=>{try{a(o.next(t))}catch(r){l(r)}},d=t=>{try{a(o.throw(t))}catch(r){l(r)}},a=t=>t.done?s(t.value):Promise.resolve(t.value).then(p,d);a((o=o.apply(i,u)).next())});import{F as V}from"./Form-BSQhYHrI.js";import{u as x}from"./useForm-D392SAX5.js";import{u as R}from"./useValidator-Dq57AcmW.js";import{c as F}from"./index-Dg16wPeM.js";import{_ as k}from"./AddButtonPermission.vue_vue_type_script_setup_true_lang-DCrTYl5u.js";import{c as C}from"./element-plus-B2PLgZHf.js";import{v as E,r as w,V as b,w as B,x as L,y as M,M as g,u as P,H as N}from"./vue-chunks-COp0tDkU.js";const z=E({__name:"Write",props:{currentRow:{type:Object,default:()=>null}},setup(i,{expose:u}){const{t:o}=F(),{required:s}=R(),l=i,p=w(!1),d=b([{field:"game_id",label:o("userDemo.gameId"),component:"Input",colProps:{span:24}},{field:"key",label:"key",component:"Input",colProps:{span:24}},{field:"name",label:o("userDemo.gameName"),component:"Input",colProps:{span:24}},{field:"value1",label:o("userDemo.value1"),component:"Input",componentProps:{type:"textarea",rows:20},colProps:{span:24}},{field:"desc",label:o("userDemo.desc"),component:"Input",colProps:{span:24}}]),a=b({component:[s()],path:[s()],"meta.title":[s()]}),{formRegister:t,formMethods:r}=x(),{setValues:h,getFormData:v,getElFormExpose:y,setSchema:m}=r,_=()=>f(this,null,function*(){const n=yield y();if(yield n==null?void 0:n.validate().catch(c=>{}))return yield v()}),D=w("");B(()=>l.currentRow,n=>{if(!n)return;const e=C(n);D.value=e.type===1?e.component:"",e.parentId===0?m([{field:"component",path:"componentProps.disabled",value:!0}]):m([{field:"component",path:"componentProps.disabled",value:!1}]),e.type===1?m([{field:"component",path:"componentProps.disabled",value:!1}]):m([{field:"component",path:"componentProps.disabled",value:!0}]),h(e)},{deep:!0,immediate:!0}),u({submit:_});const I=n=>f(this,null,function*(){const e=yield v();h({permissionList:[...(e==null?void 0:e.permissionList)||[],n]})});return(n,e)=>(L(),M(N,null,[g(P(V),{rules:a,onRegister:P(t),schema:d},null,8,["rules","onRegister","schema"]),g(k,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=c=>p.value=c),onConfirm:I},null,8,["modelValue"])],64))}});export{z as _};
