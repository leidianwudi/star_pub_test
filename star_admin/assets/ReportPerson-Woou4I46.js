var v=(k,u,n)=>new Promise((f,d)=>{var _=l=>{try{m(n.next(l))}catch(i){d(i)}},g=l=>{try{m(n.throw(l))}catch(i){d(i)}},m=l=>l.done?f(l.value):Promise.resolve(l.value).then(_,g);m((n=n.apply(k,u)).next())});import{u as J}from"./useTable-DohiMS5o.js";import{c as K,h as D}from"./index-Dg16wPeM.js";import{_ as Y}from"./Table.vue_vue_type_script_lang-B7JZHcWZ.js";import{_ as j}from"./Search.vue_vue_type_script_setup_true_lang-VcwLHU14.js";import{_ as q}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BSoUUQnL.js";import{_ as H}from"./Write.vue_vue_type_script_setup_true_lang-CnJQK3Yb.js";import{_ as O}from"./Dialog.vue_vue_type_style_index_0_lang-DhfduvPq.js";import{d as R}from"./index-Baxg4tbs.js";import{v as Q,u as t,V as $,r,x as b,y as W,M as p,K as c,k as V,J as z,a3 as C,P as L,G as T}from"./vue-chunks-COp0tDkU.js";import"./element-plus-B2PLgZHf.js";/* empty css                    *//* empty css                  *//* empty css               *//* empty css                      *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                */import"./el-radio-button-Dby5emit.js";/* empty css                         *//* empty css                  */import"./index-y8XvmqNS.js";import"./Form-BSQhYHrI.js";/* empty css                     *//* empty css               *//* empty css                        *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-DnUzEfZp.js";import"./style.css_vue_type_style_index_0_src_true_lang-zYImHsie.js";import"./wang-editor-FTv6NaqD.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-CETukC1m.js";import"./IconPicker-g7mhPobf.js";import"./IAgree.vue_vue_type_script_setup_true_lang-DsjjMfNO.js";import"./Highlight.vue_vue_type_script_lang-CytUL3R8.js";import"./useForm-D392SAX5.js";import"./useIcon-DpXlt4U3.js";import"./useValidator-Dq57AcmW.js";/* empty css                  */const X={class:"flex w-100% h-100%"},Ee=Q({__name:"ReportPerson",setup(k){const{t:u}=K(),{tableRegister:n,tableState:f,tableMethods:d}=J({fetchDataApi:()=>v(this,null,function*(){const{currentPage:e,pageSize:a}=f;let o={};return s.value&&(s.value.account||s.value.day_min)?o=yield R(t(e),t(a),s.value):o=yield R(t(e),t(a)),{list:o.data.list||[],total:o.data.total||0}})}),{dataList:_,loading:g,total:m,currentPage:l,pageSize:i}=f,{getList:B}=d,M=$([{field:"day",label:"日期"},{field:"account",label:"玩家账号"},{field:"slots_cost",label:"slots花费"},{field:"slots_win",label:"slots奖励"},{field:"slots_final",label:"slots结果"},{field:"slots_play_num",label:"slots玩次数"},{field:"poker_cost",label:"poker花费"},{field:"poker_win",label:"poker奖励"},{field:"poker_final",label:"poker结果"},{field:"poker_play_num",label:"poker玩次数"},{field:"fish_cost",label:"捕鱼花费"},{field:"fish_win",label:"捕鱼奖励"},{field:"fish_final",label:"捕鱼结果"},{field:"fish_play_num",label:"捕鱼玩次数"}]),N=$([{field:"account",label:"账号",component:"Input"},{field:"day_min",label:"起始时间",component:"DatePicker"},{field:"day_max",label:"结束时间",component:"DatePicker"}]),s=r({}),h=e=>{e&&(e.account||e.day_min)?(e.day_max||(e.day_max=e.day_min),s.value=e.day_min?{account:e.account,day_min:x(new Date(e.day_min)),day_max:x(new Date(e.day_max))}:{account:e.account}):s.value=e,B()},x=e=>{const a=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),G=String(e.getDate()).padStart(2,"0");return`${a}-${o}-${G}`},y=r(!1),U=r(""),I=r(),S=r(""),w=r(),P=r(!1),A=()=>v(this,null,function*(){const e=t(w);(yield e==null?void 0:e.submit())&&(P.value=!0)}),E=e=>{l.value=e},F=e=>{i.value=e};return(e,a)=>(b(),W("div",X,[p(t(q),{class:"flex-[3] ml-20px"},{default:c(()=>[p(t(j),{schema:N,onReset:h,onSearch:h},null,8,["schema"]),p(t(Y),{pageSize:t(i),"onUpdate:pageSize":[a[0]||(a[0]=o=>V(i)?i.value=o:null),F],currentPage:t(l),"onUpdate:currentPage":[a[1]||(a[1]=o=>V(l)?l.value=o:null),E],pagination:{total:t(m)},"tree-props":{children:"children"},columns:M,"default-expand-all":"","node-key":"id",data:t(_),loading:t(g),onRegister:t(n)},null,8,["pageSize","currentPage","pagination","columns","data","loading","onRegister"])]),_:1}),p(t(O),{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=o=>y.value=o),title:U.value},{footer:c(()=>[S.value!=="detail"?(b(),z(t(D),{key:0,type:"primary",loading:P.value,onClick:A},{default:c(()=>[C(L(t(u)("exampleDemo.save")),1)]),_:1},8,["loading"])):T("",!0),p(t(D),{onClick:a[2]||(a[2]=o=>y.value=!1)},{default:c(()=>[C(L(t(u)("dialogDemo.close")),1)]),_:1})]),default:c(()=>[S.value!=="detail"?(b(),z(H,{key:0,ref_key:"writeRef",ref:w,"current-row":I.value},null,8,["current-row"])):T("",!0)]),_:1},8,["modelValue","title"])]))}});export{Ee as default};
