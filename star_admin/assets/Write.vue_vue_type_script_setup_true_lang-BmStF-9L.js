var m=(l,c,t)=>new Promise((s,r)=>{var i=o=>{try{a(t.next(o))}catch(n){r(n)}},p=o=>{try{a(t.throw(o))}catch(n){r(n)}},a=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,p);a((t=t.apply(l,c)).next())});import{F as g}from"./Form-gS9_0x15.js";import{u as _}from"./useForm-D3UcvRwb.js";import{u as x}from"./useValidator-CNnCHXsz.js";import{v as I,c as d,r as R,V as F,w as P,x as y,J as D,u as f}from"./vue-chunks-COp0tDkU.js";const j=I({__name:"Write",props:{currentRow:{type:Object,default:()=>null}},setup(l,{expose:c}){const{required:t}=x(),s=l,r=d(()=>{var e;return!!((e=s.currentRow)!=null&&e.id)}),i=R([{field:"account",label:"账号",component:"Input"},{field:"password",label:"密码",component:"InputPassword",componentProps:d(()=>({disabled:r.value}))},{field:"name",label:"昵称",component:"Input"},{field:"visualId",label:"头像id",component:"Input"},{field:"gender",label:"性别",component:"Select",componentProps:{options:[{label:"保密",value:0},{label:"男",value:1},{label:"女",value:2}]}},{field:"introduction",label:"简介",component:"Input",componentProps:{type:"textarea",rows:2}},{field:"deleted",label:"是否删除",component:"Switch"}]),p=F({account:[t()],password:[t()]}),{formRegister:a,formMethods:o}=_(),{setValues:n,getFormData:b,getElFormExpose:w}=o,v=()=>m(this,null,function*(){const e=yield w();if(yield e==null?void 0:e.validate().catch(u=>{}))return yield b()});return P(()=>s.currentRow,e=>{e&&n(e)},{deep:!0,immediate:!0}),c({submit:v}),(e,h)=>(y(),D(f(g),{rules:p,onRegister:f(a),schema:i.value},null,8,["rules","onRegister","schema"]))}});export{j as _};
