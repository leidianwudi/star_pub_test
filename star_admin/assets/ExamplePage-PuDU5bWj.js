var H=Object.defineProperty;var z=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var R=(n,i,a)=>i in n?H(n,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[i]=a,T=(n,i)=>{for(var a in i||(i={}))Y.call(i,a)&&R(n,a,i[a]);if(z)for(var a of z(i))j.call(i,a)&&R(n,a,i[a]);return n};var b=(n,i,a)=>new Promise((f,p)=>{var x=m=>{try{d(a.next(m))}catch(c){p(c)}},g=m=>{try{d(a.throw(m))}catch(c){p(c)}},d=m=>m.done?f(m.value):Promise.resolve(m.value).then(x,g);d((a=a.apply(n,i)).next())});import{_ as F}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BSoUUQnL.js";import{_ as O}from"./Search.vue_vue_type_script_setup_true_lang-VcwLHU14.js";import{h as u,c as U}from"./index-Dg16wPeM.js";/* empty css               */import{_ as J}from"./Table.vue_vue_type_script_lang-B7JZHcWZ.js";import{g as K,d as q}from"./index-LOVV2n3f.js";import{u as G}from"./useTable-DohiMS5o.js";import{v as Q,r as S,V as W,M as s,H as X,u as t,x as Z,J as ee,K as P,B as te,a3 as $,P as A,k as E,a7 as ae,az as oe}from"./vue-chunks-COp0tDkU.js";import{u as le}from"./useEventBus-BNkogk2f.js";import{u as ie}from"./useCrudSchemas-B2QyfYFX.js";import{n as ne}from"./element-plus-B2PLgZHf.js";/* empty css                *//* empty css                  */import"./Form-BSQhYHrI.js";/* empty css                     *//* empty css               *//* empty css                    */import"./el-radio-button-Dby5emit.js";/* empty css                        *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-DnUzEfZp.js";import"./style.css_vue_type_style_index_0_src_true_lang-zYImHsie.js";import"./wang-editor-FTv6NaqD.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-CETukC1m.js";import"./IconPicker-g7mhPobf.js";/* empty css                      */import"./IAgree.vue_vue_type_script_setup_true_lang-DsjjMfNO.js";import"./Highlight.vue_vue_type_script_lang-CytUL3R8.js";import"./useForm-D392SAX5.js";import"./useIcon-DpXlt4U3.js";/* empty css                 *//* empty css                        *//* empty css                         *//* empty css                  */import"./index-y8XvmqNS.js";import"./tree-Dgaev6Pi.js";const re={class:"mb-10px"};function w(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!ae(n)}const qe=Q({name:"ExamplePage",__name:"ExamplePage",setup(n){const{push:i}=oe(),a=S([]),f=S({}),p=e=>{f.value=e,_()},{tableRegister:x,tableState:g,tableMethods:d}=G({fetchDataApi:()=>b(this,null,function*(){const{currentPage:e,pageSize:o}=g,r=yield K(T({pageIndex:t(e),pageSize:t(o)},t(f)));return{list:r.data.list,total:r.data.total}}),fetchDelApi:()=>b(this,null,function*(){return!!(yield q(t(a)))})}),{loading:m,dataList:c,total:B,currentPage:h,pageSize:D}=g,{getList:_,getElTableExpose:I,delList:M}=d;_(),le({name:"getList",callback:e=>{e==="add"&&(h.value=1),_()}});const{t:l}=U(),N=W([{field:"selection",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{type:"selection"}},{field:"index",label:l("tableDemo.index"),type:"index",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0}},{field:"title",label:l("tableDemo.title"),search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"author",label:l("tableDemo.author"),search:{hidden:!0}},{field:"display_time",label:l("tableDemo.displayTime"),search:{hidden:!0},form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:l("tableDemo.importance"),search:{hidden:!0},form:{component:"Select",componentProps:{style:{width:"100%"},options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}},detail:{slots:{default:e=>s(ne,{type:e.importance===1?"success":e.importance===2?"warning":"danger"},{default:()=>[e.importance===1?l("tableDemo.important"):e.importance===2?l("tableDemo.good"):l("tableDemo.commonly")]})}}},{field:"pageviews",label:l("tableDemo.pageviews"),search:{hidden:!0},form:{component:"InputNumber",value:0}},{field:"content",label:l("exampleDemo.content"),search:{hidden:!0},table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24,slots:{default:e=>s("div",{innerHTML:e.content},null)}}},{field:"action",width:"260px",label:l("tableDemo.action"),search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>{let o,r,v;return s(X,null,[s(u,{type:"primary",onClick:()=>L(e.row,"edit")},w(o=l("exampleDemo.edit"))?o:{default:()=>[o]}),s(u,{type:"success",onClick:()=>L(e.row,"detail")},w(r=l("exampleDemo.detail"))?r:{default:()=>[r]}),s(u,{type:"danger",onClick:()=>C(e.row)},w(v=l("exampleDemo.del"))?v:{default:()=>[v]})])}}}}]),{allSchemas:k}=ie(N),V=()=>{i("/example/example-add")},y=S(!1),C=e=>b(this,null,function*(){const o=yield I();a.value=e?[e.id]:(o==null?void 0:o.getSelectionRows().map(r=>r.id))||[],y.value=!0,yield M(t(a).length).finally(()=>{y.value=!1})}),L=(e,o)=>{i(`/example/example-${o}?id=${e.id}`)};return(e,o)=>(Z(),ee(t(F),null,{default:P(()=>[s(t(O),{schema:t(k).searchSchema,onSearch:p,onReset:p},null,8,["schema"]),te("div",re,[s(t(u),{type:"primary",onClick:V},{default:P(()=>[$(A(t(l)("exampleDemo.add")),1)]),_:1}),s(t(u),{loading:y.value,type:"danger",onClick:o[0]||(o[0]=r=>C(null))},{default:P(()=>[$(A(t(l)("exampleDemo.del")),1)]),_:1},8,["loading"])]),s(t(J),{pageSize:t(D),"onUpdate:pageSize":o[1]||(o[1]=r=>E(D)?D.value=r:null),currentPage:t(h),"onUpdate:currentPage":o[2]||(o[2]=r=>E(h)?h.value=r:null),columns:t(k).tableColumns,data:t(c),loading:t(m),pagination:{total:t(B)},onRegister:t(x)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])]),_:1}))}});export{qe as default};
