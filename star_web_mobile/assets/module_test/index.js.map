{"version":3,"sources":["../file:/D:/work/github/star_client/assets/module_test/scripts/file:/D:/work/github/star_client/assets/module_test/scripts/TestGameMgr.ts","../file:/D:/work/github/star_client/assets/module_test/scripts/file:/D:/work/github/star_client/assets/module_test/scripts/TestGameScene.ts","../file:/D:/work/github/star_client/assets/module_test/scripts/file:/D:/work/github/star_client/assets/module_test/scripts/TestLobbyScene.ts","../file:/D:/work/github/star_client/assets/module_test/ui_test_hud/file:/D:/work/github/star_client/assets/module_test/ui_test_hud/UITestHUD.ts"],"names":["TestGameMgr","_GameMgr","_inheritsLoose","_this","call","_gameType","SubGameDef","TEST","_entryScene","name","bundle","ModuleDef","_gameScene","initNetMsgHandlers","_proto","prototype","_createClass","key","get","_inst","GameMgr","SubGameMgr","inst","registerGameMgr","_RF","pop","ccclass","_decorator","property","TestGameScene","_dec","_class","_Component","apply","arguments","start","tgx","UIMgr","closeAll","showUI","UITestHUD","update","deltaTime","Component","TestLobbyScene","_dec2","UserHead","_dec3","Node","_class2","_len","length","args","Array","_key","concat","_initializerDefineProperty","_descriptor","_assertThisInitialized","_descriptor2","_this2","UserMgr","uid","SceneUtil","loadScene","SceneDef","START","lobbyNet","type","UIChat","UIAnnouncement","ui","pos","announcementPlacer","position","setPosition","x","y","onBtnQuickPlayClicked","_this3","UI_SearchingRival","scheduleOnce","startMatch","onBtnSoloModeClicked","RoomMgr","gameMode","GameMode","SOLO","gameScene","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","Layout_UITestHUD","Button","tgx_class","_class4","_tgx$UIController","GameUILayers","HUD","onCreated","params","onButtonEvent","layout","btnBack","UIAlert","show","onClick","isOK","exitRoom","_layout","UIController"],"mappings":"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","file":"all.js","sourcesContent":["import { GameMgr } from \"../../module_basic/scripts/GameMgr\";\nimport { SubGameDef } from \"../../module_basic/scripts/SubGameDef\";\nimport { SubGameMgr } from \"../../module_basic/scripts/SubGameMgr\";\nimport { ModuleDef } from \"../../scripts/ModuleDef\";\n\nexport class TestGameMgr extends GameMgr {\n    private static _inst: TestGameMgr;\n    public static get inst(): TestGameMgr {\n        if (!this._inst) {\n            this._inst = new TestGameMgr();\n        }\n        return this._inst;\n    }\n\n    constructor() {\n        super();\n        this._gameType = SubGameDef.TEST;\n        this._entryScene = { name: 'lobby_gametest', bundle: ModuleDef.TEST };\n        this._gameScene = { name: 'game_gametest', bundle: ModuleDef.TEST };\n        this.initNetMsgHandlers();\n    }\n\n    initNetMsgHandlers() {\n\n    }\n}\n\nSubGameMgr.inst.registerGameMgr(TestGameMgr.inst);","import { _decorator, Component, Node } from 'cc';\nimport { UITestHUD } from '../ui_test_hud/UITestHUD';\nconst { ccclass, property } = _decorator;\n\n@ccclass('TestGameScene')\nexport class TestGameScene extends Component {\n    start() {\n        tgx.UIMgr.inst.closeAll();\n        tgx.UIMgr.inst.showUI(UITestHUD);\n    }\n\n    update(deltaTime: number) {\n        \n    }\n}\n\n","import { _decorator, Component, Node } from 'cc';\nimport { UserHead } from '../../module_basic/scripts/UserHead';\nimport { UserMgr } from '../../module_basic/scripts/UserMgr';\nimport { SceneDef } from '../../scripts/SceneDef';\nimport { lobbyNet } from '../../module_basic/scripts/NetGameServer';\nimport { UIChat } from '../../module_basic/ui_chat/UIChat';\nimport { UIAnnouncement } from '../../module_basic/ui_announcement/UIAnnouncement';\nimport { UI_SearchingRival } from '../../module_basic/ui_searching_rival/UI_SearchingRival';\nimport { RoomMgr } from '../../module_basic/scripts/RoomMgr';\nimport { GameMode } from '../../module_basic/scripts/GameMgr';\nimport { TestGameMgr } from './TestGameMgr';\nconst { ccclass, property } = _decorator;\n\n@ccclass('TestLobbyScene')\nexport class TestLobbyScene extends Component {\n    @property(UserHead) userHead:UserHead;\n    @property(Node) announcementPlacer:Node;\n\n    start() {\n        //@en \n        //@zh 如果 uid 为空，表示直接打开了此场景，强行使用 START 场景开始。\n        if (!UserMgr.inst.uid) {\n            tgx.SceneUtil.loadScene(SceneDef.START);\n            return;\n        }\n        \n        //清理所有 UI\n        tgx.UIMgr.inst.closeAll();\n\n        //如果为 socket 模式，则开启大厅聊天\n        if(lobbyNet.type != 'http'){\n            tgx.UIMgr.inst.showUI(UIChat,null,null,lobbyNet);\n        }\n\n        //@en \n        //@zh 显示滚动公告\n        tgx.UIMgr.inst.showUI(UIAnnouncement,(ui:UIAnnouncement)=>{\n            //设置位置\n            let pos = this.announcementPlacer.position;\n            ui.setPosition(pos.x,pos.y);\n        });\n    }\n\n    onBtnQuickPlayClicked() {\n        tgx.UIMgr.inst.showUI(UI_SearchingRival, (ui: UI_SearchingRival) => {\n            this.scheduleOnce(() => {\n                ui.startMatch('test');\n            }, 1.5);\n        });\n    }\n\n    onBtnSoloModeClicked() {\n        RoomMgr.inst.gameMode = GameMode.SOLO;\n        tgx.SceneUtil.loadScene(TestGameMgr.inst.gameScene);\n    }\n\n    update(deltaTime: number) {\n        \n    }\n}\n\n","import { _decorator, Button, Component, Node } from 'cc';\r\nimport { GameUILayers } from '../../scripts/GameUILayers';\r\nimport { ModuleDef } from '../../scripts/ModuleDef';\r\nimport { RoomMgr } from '../../module_basic/scripts/RoomMgr';\r\nimport { GameMode } from '../../module_basic/scripts/GameMgr';\r\nimport { TestGameMgr } from '../scripts/TestGameMgr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Layout_UITestHUD')\r\nexport class Layout_UITestHUD extends Component {\r\n    @property(Button) btnBack:Button;\r\n}\r\n\r\n@tgx_class(ModuleDef.TEST)\r\nexport class UITestHUD extends tgx.UIController{\r\n    constructor(){\r\n        super(\"ui_test_hud/ui_test_hud\",GameUILayers.HUD,Layout_UITestHUD);\r\n    }\r\n\r\n    private get layout():Layout_UITestHUD{\r\n        return this._layout as Layout_UITestHUD;\r\n    }\r\n\r\n    protected onCreated(params?: any): void {\r\n        this.onButtonEvent(this.layout.btnBack,()=>\r\n        {\r\n            tgx.UIAlert.show(\"确定要退出游戏吗？\",true).onClick((isOK:boolean)=>{\r\n                if(isOK){\r\n                    RoomMgr.inst.exitRoom();\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\n"]}