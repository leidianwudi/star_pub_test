System.register("chunks:///_virtual/DamageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,i,o;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,i=e._decorator,o=e.Component}],execute:function(){var n;a._RF.push({},"ed1f693B5ZAzr48dUvNXANX","DamageLabel",void 0);var r=i.ccclass;i.property,e("DamageLabel",r("DamageLabel")(n=function(e){function a(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._floatSpeed=20,t._lifeTime=1,t._elapsedTime=0,t}t(a,e);var i=a.prototype;return i.start=function(){},i.update=function(e){this._elapsedTime+=e;var t=this.node.position;this.node.setPosition(t.x,t.y+e*this._floatSpeed,t.z),this._elapsedTime>this._lifeTime&&this.node.destroy()},a}(o))||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/Effect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,c,o,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator,o=t.UIOpacity,r=t.tween,i=t.Component}],execute:function(){var u;n._RF.push({},"f87e5eLbipGubz+5Or5RWXQ","Effect",void 0);var s=c.ccclass;c.property,t("Effect",s("Effect")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var c=n.prototype;return c.start=function(){var t=this;this.scheduleOnce((function(){var e=t.node.getComponent(o);r(e).to(1,{opacity:0}).start()}),3)},c.update=function(t){},n}(i))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/FollowTarget.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,o,i,n,a,l,s,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.Node,s=t.isValid,c=t.Component}],execute:function(){var u,p,d,f,g;n._RF.push({},"f705fWwQU9LILordSGQJXqx","FollowTarget",void 0);var h=a.ccclass,y=a.property;t("FollowTarget",(u=h("FollowTarget"),p=y(l),u((g=e((f=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"target",g,i(e)),e}r(e,t);var n=e.prototype;return n.start=function(){},n.lateUpdate=function(t){if(s(this.target)){var e=this.target.worldPosition,r=this.node.worldPosition;this.node.setWorldPosition(e.x,e.y,r.z)}},e}(c)).prototype,"target",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=f))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/Layout_UITankGameHUD.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,l,r,i,o,n,a,u,c,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,a=e.Button,u=e.Label,c=e.Node,b=e.Component}],execute:function(){var p,s,y,m,f,g,d,D,I,L,P,U,_;o._RF.push({},"35614TjkZNLVaErJuPNDP8I","Layout_UITankGameHUD",void 0);var h=n.ccclass,z=n.property;n.type,e("Layout_UITankGameHUD",(p=h("Layout_UITankGameHUD"),s=z(a),y=z(u),m=z(u),f=z(u),g=z(c),p((I=t((D=function(e){function t(){for(var t,l=arguments.length,o=new Array(l),n=0;n<l;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,r(t,"btnExit",I,i(t)),r(t,"lblRoomId",L,i(t)),r(t,"lblPos",P,i(t)),r(t,"lblPlayerNum",U,i(t)),r(t,"noticeRoot",_,i(t)),t}return l(t,e),t}(b)).prototype,"btnExit",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(D.prototype,"lblRoomId",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(D.prototype,"lblPos",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(D.prototype,"lblPlayerNum",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(D.prototype,"noticeRoot",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=D))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/Layout_UITankGameMask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,a,t,n,i,o,c,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,a=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,c=e.Sprite,s=e.Component}],execute:function(){var l,u,p,y,f,k,m;i._RF.push({},"fcac0v/YIFJvbTaRrmsNHhF","Layout_UITankGameMask",void 0);var b=o.ccclass,g=o.property;e("Layout_UITankGameMask",(l=b("Layout_UITankGameMask"),u=g(c),p=g(c),l((k=r((f=function(e){function r(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,t(r,"sprGrayScreen",k,n(r)),t(r,"sprFogOfWar",m,n(r)),r}return a(r,e),r}(s)).prototype,"sprGrayScreen",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=r(f.prototype,"sprFogOfWar",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=f))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/Layout_UITankGameRank.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,n,r,o,i,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,u=e.Node,c=e.Component}],execute:function(){var l,s,p,y,f;o._RF.push({},"3ed57uSugVEA4kvUM0JVxfQ","Layout_UITankGameRank",void 0);var k=i.ccclass,R=i.property;e("Layout_UITankGameRank",(l=k("Layout_UITankGameRank"),s=R(u),l((f=t((y=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,n(t,"listRoot",f,r(t)),t}return a(t,e),t}(c)).prototype,"listRoot",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=y))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/Layout_UITankJoystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,n,o,c,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,a=t.Sprite,s=t.Component}],execute:function(){var u,p,l,y,f;o._RF.push({},"08c9fBAccJNS4nsaO4D33pI","Layout_UITankJoystick",void 0);var k=c.ccclass,_=c.property;t("Layout_UITankJoystick",(u=k("Layout_UITankJoystick"),p=_([a]),u((f=e((y=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,i(e,"cdSprites",f,n(e)),e}return r(e,t),e}(s)).prototype,"cdSprites",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=y))||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/Layout_UITankRevive.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,i,t,n,a,o,l,c,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Label,c=e.Sprite,u=e.Component}],execute:function(){var p,s,v,y,b,f,_;a._RF.push({},"03340R2AB9Mcou6uF8cFrnG","Layout_UITankRevive",void 0);var h=o.ccclass,L=o.property;e("Layout_UITankRevive",(p=h("Layout_UITankRevive"),s=L(l),v=L(c),p((f=r((b=function(e){function r(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,t(r,"lblTime",f,n(r)),t(r,"sprScreen",_,n(r)),r}return i(r,e),r}(u)).prototype,"lblTime",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=r(b.prototype,"sprScreen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=b))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/module_tank",["./Effect.ts","./DamageLabel.ts","./FollowTarget.ts","./NameHP.ts","./Tank.ts","./TankBullet.ts","./TankController.ts","./TankGameAudioMgr.ts","./TankGameHUD.ts","./TankGameMgr.ts","./TankGameScene.ts","./TankLobbyScene.ts","./TankMgr.ts","./TankMovement2D.ts","./Layout_UITankGameHUD.ts","./NoticeLabel.ts","./UITankGameHUD.ts","./Layout_UITankGameMask.ts","./UITankGameMask.ts","./Layout_UITankGameRank.ts","./TankGameRankItem.ts","./UITankGameRank.ts","./Layout_UITankJoystick.ts","./UITankJoystick.ts","./Layout_UITankRevive.ts","./UITankRevive.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NameHP.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,a,l,o,c,s,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){l=e.cclegacy,o=e._decorator,c=e.Node,s=e.Label,p=e.Sprite,u=e.Component}],execute:function(){var h,b,f,m,y,N,g;l._RF.push({},"70dbarSbilHfrVZ77CvDOBA","NameHP",void 0);var d=o.ccclass,v=o.property;e("NameHP",(h=d("NameHP"),b=v(c),f=v(s),h((N=t((y=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"hpBar",N,n(t)),i(t,"lblName",g,n(t)),t}return r(t,e),a(t,[{key:"hpPercent",set:function(e){this.hpBar.setScale(e,1)}},{key:"name",set:function(e){this.lblName.string=e}},{key:"color",set:function(e){this.hpBar.getComponent(p).color=e,this.lblName.color=e}}]),t}(u)).prototype,"hpBar",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(y.prototype,"lblName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=y))||m));l._RF.pop()}}}));

System.register("chunks:///_virtual/NoticeLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,l,r,i,a;return{setters:[function(t){e=t.inheritsLoose,o=t.createClass},function(t){n=t.cclegacy,l=t._decorator,r=t.Color,i=t.Label,a=t.Component}],execute:function(){var c;n._RF.push({},"2ba45UN5ndEx4xJpBV7Ogz8","NoticeLabel",void 0);var s=l.ccclass,u=(l.property,new r);t("NoticeLabel",s("NoticeLabel")(c=function(t){function n(){for(var e,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))||this)._label=void 0,e}return e(n,t),n.prototype.onLoad=function(){this._label=this.getComponent(i)},o(n,[{key:"alpha",get:function(){return this._label.color.a},set:function(t){u.set(this._label.color),u.a=t,this._label.color=u}},{key:"string",get:function(){return this._label.string},set:function(t){this._label.string=t}}]),n}(a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Tank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TankBullet.ts","./TankGameAudioMgr.ts","./TankGameMgr.ts","./TankMgr.ts"],(function(t){var e,i,n,r,o,a,l,s,u,c,d,h,p,f,m,y,b,v,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Vec2,s=t.Prefab,u=t.Node,c=t.Sprite,d=t.Color,h=t.tween,p=t.v3,f=t.instantiate,m=t.Component},function(t){y=t.TankBullet},function(t){b=t.TankGameAudioMgr},function(t){v=t.TankGameMgr},function(t){g=t.TankMgr}],execute:function(){var k,T,B,P,S,w,M,z,_,A,F,C,D,x,G;o._RF.push({},"d1b03Z5TBtCJYploSlGTOkK","Tank",void 0);var I=a.ccclass,R=a.property,L=new l;t("Tank",(k=I("Tank"),T=R(s),B=R(u),P=R(u),S=R(c),w=R(u),M=R(u),k((A=e((_=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"bullet",A,r(e)),n(e,"firePoint",F,r(e)),n(e,"barrel",C,r(e)),n(e,"lid",D,r(e)),n(e,"normalState",x,r(e)),n(e,"destroyedState",G,r(e)),e.player=void 0,e.nameBar=void 0,e._isFiring=!1,e}i(e,t);var o=e.prototype;return o.start=function(){g.inst.addTank(this)},o.setState=function(t){"normal"==t?(this.normalState.active=!0,this.destroyedState.active=!1):"destroyed"==t&&(this.normalState.active=!1,this.destroyedState.active=!0)},o.setColor=function(t){var e=new d;d.fromUint32(e,4278190080|t),this.lid.color=e,this.nameBar.color=e},o.onDestroy=function(){g.inst.removeTank(this),this.nameBar&&(this.nameBar.node.removeFromParent(),this.nameBar.node.destroy(),this.nameBar=null)},o.beAttack=function(t,e,i){v.inst.sendMsg_TankAttack(t,this.player.playerId,e,i)},o.shootAnim=function(t){var e=b.getVolumeByDist(this.node.worldPosition,v.inst.selfPlayer);b.playOneShot("sounds/sfx_shoot",e);var i=this.barrel.position.x;h(this.barrel).to(.05,{position:p(i-20,0,0)}).then(h(this.barrel).to(.1,{position:p(i,0,0)})).call((function(){t&&t()})).start()},o.fireBullet=function(t,e){var i=f(this.bullet);this.node.parent.addChild(i),i.setWorldPosition(t.x,t.y,t.z),i.setRotationFromEuler(0,0,e);var n=e/180*Math.PI,r=L.set(Math.cos(n),Math.sin(n));return i.getComponent(y).moveDir=r,i},o.shoot=function(){var t=this;if(!this._isFiring){this._isFiring=!0;var e=this.firePoint.worldPosition,i=this.fireBullet(e,this.player.rotation);this.shootAnim((function(){t._isFiring=!1}));var n=i.worldPosition,r=i.eulerAngles,o=i.getComponent(y);o.player=this.player,v.inst.sendMsg_TankShoot(n.x,n.y,n.z,r.z,o.moveSpeed,o.lifeTime)}},o.lateUpdate=function(t){if(this.nameBar){var e=this.node.worldPosition;this.nameBar.node.setWorldPosition(e)}},e}(m)).prototype,"bullet",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(_.prototype,"firePoint",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(_.prototype,"barrel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(_.prototype,"lid",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(_.prototype,"normalState",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(_.prototype,"destroyedState",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=_))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/TankBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TankGameAudioMgr.ts","./TankGameMgr.ts","./TankMgr.ts"],(function(e){var t,i,o,n,r,a,l,s,d,u,f,c,p,h,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,l=e._decorator,s=e.Prefab,d=e.v2,u=e.instantiate,f=e.find,c=e.Component},function(e){p=e.TankGameAudioMgr},function(e){h=e.TankGameMgr},function(e){y=e.TankMgr}],execute:function(){var m,v,g,k,b,T,_;a._RF.push({},"a53885kGXFApaKZHdvb+kXu","TankBullet",void 0);var w=l.ccclass,D=l.property;e("TankBullet",(m=w("TankBullet"),v=D(s),m((b=t((k=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"moveSpeed",b,n(t)),o(t,"lifeTime",T,n(t)),o(t,"efx",_,n(t)),t.player=void 0,t.damage=10,t._lifeStart=0,t._moveDir=d(),t}i(t,e);var a=t.prototype;return a.start=function(){this._lifeStart=Date.now(),this.damage=Math.floor(15*Math.random()+10)},a.update=function(e){if(this._lifeStart+this.lifeTime<Date.now())this.lifeEnd();else{var t=this.moveSpeed*e,i=this._moveDir.x*t,o=this._moveDir.y*t,n=this.node.position;this.node.setPosition(n.x+i,n.y+o,n.z)}},a.lifeEnd=function(){var e=u(this.efx);f("SceneRoot2D/ground_effects").addChild(e),e.setWorldPosition(this.node.worldPosition),e.setWorldRotation(this.node.worldRotation);var t=p.getVolumeByDist(this.node.worldPosition,h.inst.selfPlayer);p.playOneShot("sounds/sfx_boom",t),this.node.destroy()},a.lateUpdate=function(e){for(var t=y.inst.tankList,i=0;i<t.length;i++){var o=t[i],n=this.node.worldPosition,r=o.node.worldPosition,a=n.x-r.x,l=n.y-r.y;if(a*a+l*l<2500){this.player!=o.player&&this.lifeEnd(),this.player&&this.player.color!=o.player.color&&o.beAttack(this.player.playerId,this.damage,this.node.worldPosition);break}}},r(t,[{key:"moveDir",set:function(e){this._moveDir.set(e)}}]),t}(c)).prototype,"moveSpeed",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 400}}),T=t(k.prototype,"lifeTime",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3e3}}),_=t(k.prototype,"efx",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=k))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/TankController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TankGameMgr.ts","./Tank.ts","./TankMovement2D.ts"],(function(t){var e,n,o,i,r,l,a,s,u,c,p,f,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.v2,s=t.Prefab,u=t.Node,c=t.Component},function(t){p=t.TankGameMgr,f=t.TankSkill},function(t){d=t.Tank},function(t){h=t.TankMovement2D}],execute:function(){var k,v,m,g,b,y,_,T,C;r._RF.push({},"2fdf4eFjt5A7bR0Vxi5rMNk","TankController",void 0);var S=l.ccclass,x=l.property;a(),t("TankController",(k=S("TankController"),v=x(s),m=x(u),g=x(u),k((_=e((y=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,o(e,"bullet",_,i(e)),o(e,"firePoint",T,i(e)),o(e,"barrel",C,i(e)),e._movement2d=void 0,e._tank=void 0,e}n(e,t);var r=e.prototype;return r.start=function(){this._tank=this.node.getComponent(d),tgx.EasyController.on(tgx.EasyControllerEvent.BUTTON,this.onButtonHit,this),this._movement2d=this.node.getComponent(h)},r.onButtonHit=function(t){p.inst.selfPlayer.hp<=0||("btn_skill_1"==t&&p.inst.castSkill(f.SKILL_1)&&this._tank.shoot(),"btn_skill_2"==t&&p.inst.castSkill(f.SKILL_2)&&this._movement2d.tempSpeedUp(2,3e3))},r.lateUpdate=function(t){var e;if((null==(e=this._movement2d)?void 0:e.getRealSpeed())>0){var n=this.node.worldPosition,o=this.node.eulerAngles;p.inst.sendMsg_TankDataChange(n.x,n.y,n.z,o.z)}},r.onDestroy=function(){tgx.EasyController.off(tgx.EasyControllerEvent.BUTTON,this.onButtonHit,this)},e}(c)).prototype,"bullet",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(y.prototype,"firePoint",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(y.prototype,"barrel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=y))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/TankGameAudioMgr.ts",["cc","./ModuleDef.ts"],(function(t){var n,u;return{setters:[function(t){n=t.cclegacy},function(t){u=t.ModuleDef}],execute:function(){n._RF.push({},"8c418KJR+pDVoV/UJg+x4Is","TankGameAudioMgr",void 0);var i=u.TANK;t("TankGameAudioMgr",function(){function t(){}return t.playOneShot=function(t,n){void 0===n&&(n=1),tgx.AudioMgr.inst.playOneShot(t,n,i)},t.play=function(t,n){void 0===n&&(n=1),tgx.AudioMgr.inst.play(t,n,i)},t.stop=function(){tgx.AudioMgr.inst.stop()},t.pause=function(){tgx.AudioMgr.inst.pause()},t.resume=function(){tgx.AudioMgr.inst.resume()},t.getVolumeByDist=function(t,n,u){void 0===u&&(u=50);var i=t.x-n.x,o=t.y-n.y,e=Math.sqrt(i*i+o*o+0);if(e<1)return 1;var r=1/(e/u);return r>1&&(r=1),r},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/TankGameHUD.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,r=n.Component}],execute:function(){var c;e._RF.push({},"87ccfNn2vhCsqxKSoO6giwh","TankGameHUD",void 0);var a=o.ccclass;o.property,n("TankGameHUD",a("TankGameHUD")(c=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.start=function(){},o.update=function(n){},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/TankGameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMgr.ts","./SubGameMgr.ts","./UserMgr.ts","./NetGameServer.ts","./RoomMgr.ts","./SubGameDef.ts","./ModuleDef.ts"],(function(e){var t,a,n,i,s,r,l,o,u,h,_,g,m;return{setters:[function(e){t=e.createClass,a=e.inheritsLoose,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,r=e.director},function(e){l=e.GameMgr},function(e){o=e.SubGameMgr},function(e){u=e.UserMgr},function(e){h=e.gameNet},function(e){_=e.RoomMgr},function(e){g=e.SubGameDef},function(e){m=e.ModuleDef}],execute:function(){s._RF.push({},"0bff2AUaPhJer3S0eIIrZEE","TankGameMgr",void 0);var c=e("TankGameEvent",(function(){}));c.ROOM_PUSH="TankGameEvent.ROOM_PUSH",c.PLAYER_COMES="TankGameEvent.PLAYER_COMES",c.PLAYER_LEAVES="TankGameEvent.PLAYER_LEAVES",c.PLAYER_DATA_CHANGED="TankGameEvent.PLAYER_DATA_CHANGED",c.GAME_BEGIN="TankGameEvent.GAME_BEGIN",c.GAME_OVER="TankGameEvent.GAME_OVER",c.TANK_DATA_CHANGED="TankGameEvent.TANK_DATA_CHANGED",c.TANK_SHOOT="TankGameEvent.TANK_SHOOT",c.TANK_ATTACK="TankGameEvent.TANK_ATTACK",c.PLAYER_DIE="TankGameEvent.PLAYER_DIE",c.PLAYER_REVIVE="TankGameEvent.PLAYER_REVIVE";var f=e("TankSkill",(function(){this.id=void 0,this.cd=void 0}));f.SKILL_1=1e3,f.SKILL_2=1001;var y=e("TankSillCastInfo",function(){function e(){this.skill=void 0,this.lastCastTime=void 0}return t(e,[{key:"isInCD",get:function(){return this.lastCastTime+this.skill.cd-Date.now()>0}},{key:"cdPercent",get:function(){var e=this.lastCastTime+this.skill.cd-Date.now();return e<=0?0:e/this.skill.cd}}]),e}()),d={};d[f.SKILL_1]={id:f.SKILL_1,cd:2e3},d[f.SKILL_2]={id:f.SKILL_1,cd:3e4};var k=e("TankGameMgr",function(e){function s(){var t;return(t=e.call(this)||this)._gameData=void 0,t._playerMap={},t._skillCdMap={},t._selfPlayer=void 0,t._gameType=g.TANK,t._entryScene={name:"lobby_tank",bundle:m.TANK},t._gameScene={name:"game_tank",bundle:m.TANK},t.initNetMsgHandlers(),t}a(s,e);var l=s.prototype;return l.castSkill=function(e){var t=d[e];if(!t)return!1;var a=this._skillCdMap[e];return a||((a=new y).skill=t,a.lastCastTime=0,this._skillCdMap[e]=a),!a.isInCD&&(a.lastCastTime=Date.now(),!0)},l.getSkillCd=function(e){return this._skillCdMap[e]},l.beforeLoadScene=function(){var e=n(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.inst.rpc_JoinGame();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l.initNetMsgHandlers=function(){h.listenMsg("tank/GameDataSyncPush",this.onNet_GameDataSyncPush,this),h.listenMsg("tank/GameDataChangedPush",this.onNet_GameDataChangedPush,this),h.listenMsg("tank/PlayerComesPush",this.onNet_PlayerComesPush,this),h.listenMsg("tank/PlayerDataChangedPush",this.onNet_PlayerDataChangedPush,this),h.listenMsg("tank/PlayerLeavesPush",this.onNet_PlayerLeavesPush,this),h.listenMsg("tank/GameBeginPush",this.onNet_GameBeginPush,this),h.listenMsg("tank/GameOverPush",this.onNet_GameOverPush,this),h.listenMsg("tank/TankDataChange",this.onNet_TankDataChange,this),h.listenMsg("tank/TankShoot",this.onNet_TankShoot,this),h.listenMsg("tank/TankAttack",this.onNet_TankAttack,this)},l.sendMsg_TankDataChange=function(e,t,a,n){h.sendMsg("tank/TankDataChange",{x:e,y:t,z:a,rotation:n})},l.sendMsg_TankShoot=function(e,t,a,n,i,s){h.sendMsg("tank/TankShoot",{x:e,y:t,z:a,rz:n,speed:i,lifeTime:s})},l.sendMsg_TankAttack=function(e,t,a,n){h.sendMsg("tank/TankAttack",{attackerId:e,targetId:t,damage:a,attackPoint:n})},l.reset=function(){e.prototype.reset.call(this)},l.initAIMode=function(){},l.getPlayer=function(e){if(!this._gameData||!this._gameData.players)return null;for(var t=0;t<this._gameData.players.length;++t){var a=this._gameData.players[t];if(a.playerId==e)return a}return null},l.getPlayerIndex=function(e){for(var t=0;t<this._gameData.players.length;++t)if(this._gameData.players[t].uid==e)return t;return-1},l.onNet_GameDataSyncPush=function(e){var t=this;this._gameData=e.data,this._gameData.players.forEach((function(e){t._playerMap[e.playerId]=e,e.uid==u.inst.uid&&(t._selfPlayer=e)})),r.emit(c.ROOM_PUSH)},l.onNet_GameDataChangedPush=function(e){this._gameData},l.onNet_PlayerComesPush=function(e){this._gameData.players.push(e.player),this._playerMap[e.player.playerId]=e.player,e.player.uid==u.inst.uid&&(this._selfPlayer=e.player),r.emit(c.PLAYER_COMES,e.player)},l.onNet_PlayerDataChangedPush=function(e){var t=this.getPlayer(e.playerId);t&&(null!=e.hp&&(t.hp=e.hp),null!=e.maxHp&&(t.maxHp=e.maxHp),null!=e.score&&(t.score=e.score),null!=e.reviveTime&&(t.reviveTime=e.reviveTime,e.reviveTime>0?r.emit(c.PLAYER_DIE,t):r.emit(c.PLAYER_REVIVE,t)),r.emit(c.PLAYER_DATA_CHANGED,e))},l.onNet_PlayerLeavesPush=function(e){for(var t=0;t<this._gameData.players.length;++t){var a=this._gameData.players[t];if(a.uid==e.uid){this._gameData.players.splice(t,1),delete this._playerMap[a.playerId],r.emit(c.PLAYER_LEAVES,a);break}}},l.onNet_GameBeginPush=function(e){this._gameData&&(this._gameData.players.forEach((function(e){})),r.emit(c.GAME_BEGIN))},l.onNet_GameOverPush=function(e){r.emit(c.GAME_OVER,e)},l.onNet_TankDataChange=function(e){var t=this.getPlayer(e.playerId);t.x=e.x,t.y=e.y,t.z=e.z,t.rotation=e.rotation,r.emit(c.TANK_DATA_CHANGED,e)},l.onNet_TankShoot=function(e){r.emit(c.TANK_SHOOT,e)},l.onNet_TankAttack=function(e){r.emit(c.TANK_ATTACK,e)},t(s,[{key:"selfPlayer",get:function(){return this._selfPlayer}},{key:"gameData",get:function(){return this._gameData}},{key:"selfPlayerIndex",get:function(){return this.getPlayerIndex(u.inst.uid)}},{key:"leftUserId",get:function(){return this._gameData&&0!=this._gameData.players.length?_.inst.isPlayer?u.inst.uid:this._gameData.players[0].uid:""}},{key:"rightUserId",get:function(){if(!this._gameData||0==this._gameData.players.length)return"";if(_.inst.isPlayer){if(this._gameData.players[0].uid!=u.inst.uid)return this._gameData.players[0].uid;var e=this._gameData.players[1];return e?e.uid:""}var t=this._gameData.players[1];return t?t.uid:""}}],[{key:"inst",get:function(){return this._inst||(this._inst=new s),this._inst}}]),s}(l));k._inst=void 0,o.inst.registerGameMgr(k.inst),s._RF.pop()}}}));

System.register("chunks:///_virtual/TankGameRankItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,a,i,o,l,c,s,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Color,c=e.Label,s=e.Sprite,p=e.Component}],execute:function(){var u,f,b,m,g,y,h;i._RF.push({},"1a1a5F986JHO5elKqXPPAbc","TankGameRankItem",void 0);var k=o.ccclass,I=o.property,w=[new l(255,0,0,50),new l(255,0,255,50),new l(0,255,0,50),new l(0,0,0,50)];e("TankGameRankItem",(u=k("TankGameRankItem"),f=I(c),b=I(s),u((y=n((g=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,r(n,"lblInfo",y,a(n)),r(n,"sprBg",h,a(n)),n}return t(n,e),n.prototype.setInfo=function(e,n,t){this.lblInfo.string=e+"."+n+" ("+t+")",this.sprBg.color=e<=3?w[e-1]:w[3]},n}(p)).prototype,"lblInfo",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=n(g.prototype,"sprBg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=g))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/TankGameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TankGameMgr.ts","./UserMgr.ts","./FollowTarget.ts","./TankController.ts","./Tank.ts","./UITankGameHUD.ts","./NameHP.ts","./UITankRevive.ts","./TankMovement2D.ts","./UITankGameMask.ts","./UITankJoystick.ts","./UITankGameRank.ts","./RoomMgr.ts","./SubGameMessage.ts"],(function(t){var e,a,n,o,i,r,s,l,c,h,f,u,m,k,p,d,T,y,g,I,_,R,P,U,b,v,A,M,G;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,i=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,c=t.Prefab,h=t.Node,f=t.director,u=t.instantiate,m=t.Label,k=t.Component},function(t){p=t.TankGameEvent,d=t.TankGameMgr},function(t){T=t.UserMgr},function(t){y=t.FollowTarget},function(t){g=t.TankController},function(t){I=t.Tank},function(t){_=t.UITankGameHUD},function(t){R=t.NameHP},function(t){P=t.UITankRevive},function(t){U=t.TankMovement2D},function(t){b=t.UITankGameMask},function(t){v=t.UITankJoystick},function(t){A=t.UITankGameRank},function(t){M=t.RoomMgr},function(t){G=t.SubGameMessage}],execute:function(){var E,D,C,S,w,H,L,x,z,N,B,K,O,Y,F,J,V,j,W;s._RF.push({},"93845hnoKZPF4LEX3faqKr5","TankGameScene",void 0);var q=l.ccclass,X=l.property;t("TankGameScene",(E=q("TankGameScene"),D=X(c),C=X(c),S=X(c),w=X(h),H=X(h),L=X(h),x=X(h),z=X(y),E((K=e((B=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,n(e,"tankPrefab",K,o(e)),n(e,"namePrefab",O,o(e)),n(e,"damageLabelPrefab",Y,o(e)),n(e,"objectsRoot",F,o(e)),n(e,"groundEffect",J,o(e)),n(e,"namesRoot",V,o(e)),n(e,"damageRoot",j,o(e)),n(e,"followTarget",W,o(e)),e._tankMap={},e._UITankGameMask=void 0,e._UITankJoystick=void 0,e._UITankGameHUD=void 0,e._UITankGameRank=void 0,e}a(e,t);var s=e.prototype;return s.start=function(){var t=i(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:tgx.UIMgr.inst.closeAll(),f.on(p.PLAYER_COMES,this.onPlayerComes,this),f.on(p.PLAYER_LEAVES,this.onPlayerLeaves,this),f.on(p.PLAYER_DATA_CHANGED,this.onPlayerDataChanged,this),f.on(p.TANK_DATA_CHANGED,this.onTankDataChanged,this),f.on(p.TANK_SHOOT,this.onTankShoot,this),f.on(p.TANK_ATTACK,this.onTankAttack,this),f.on(p.PLAYER_REVIVE,this.onPlayerRevive,this),f.on(p.PLAYER_DIE,this.onPlayerDie,this),f.on(G.EnterSubGameRoomSuccess,this.reStart,this),f.on(p.ROOM_PUSH,this.onRoomBackByRoomMgr,this),M.inst.rpc_Ready(),this.reStart();case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onDestroy=function(){f.off(p.PLAYER_COMES,this.onPlayerComes,this),f.off(p.PLAYER_LEAVES,this.onPlayerLeaves,this),f.off(p.PLAYER_DATA_CHANGED,this.onPlayerDataChanged,this),f.off(p.TANK_DATA_CHANGED,this.onTankDataChanged,this),f.off(p.TANK_SHOOT,this.onTankShoot,this),f.off(p.TANK_ATTACK,this.onTankAttack,this),f.off(p.PLAYER_REVIVE,this.onPlayerRevive,this),f.off(p.PLAYER_DIE,this.onPlayerDie,this),f.off(p.ROOM_PUSH,this.onRoomBackByRoomMgr,this),f.off(G.EnterSubGameRoomSuccess,this.reStart,this)},s.reStart=function(){M.inst.rpc_ClientReady(),this.objectsRoot.removeAllChildren(),this.groundEffect.removeAllChildren(),this._UITankGameMask&&(this._UITankGameMask.close(),this._UITankGameMask=null),this._UITankJoystick&&(this._UITankJoystick.close(),this._UITankJoystick=null),this._UITankGameHUD&&(this._UITankGameHUD.close(),this._UITankGameHUD=null),this._UITankGameRank&&(this._UITankGameRank.close(),this._UITankGameRank=null)},s.onRoomBackByRoomMgr=function(){var t=this;this._UITankGameMask=tgx.UIMgr.inst.showUI(b),this._UITankJoystick=tgx.UIMgr.inst.showUI(v),this._UITankGameHUD=tgx.UIMgr.inst.showUI(_),this._UITankGameRank=tgx.UIMgr.inst.showUI(A),d.inst.gameData.players.forEach((function(e){t.createTank(e)}))},s.onPlayerComes=function(t){this.createTank(t)},s.onPlayerLeaves=function(t){var e=this._tankMap[t.playerId];e&&(e.node.removeFromParent(),e.node.destroy(),delete this._tankMap[t.playerId])},s.onPlayerDataChanged=function(t){if(null!=t.hp||null!=t.maxHp){var e=this._tankMap[t.playerId];if(!e)return;e.nameBar.hpPercent=e.player.hp/e.player.maxHp}},s.onTankDataChanged=function(t){if(t.playerId!=d.inst.selfPlayer.playerId||t.forceSync){var e=this._tankMap[t.playerId];e&&(e.node.setWorldPosition(t.x,t.y,t.z),e.node.setWorldRotationFromEuler(0,0,t.rotation))}},s.onTankShoot=function(t){if(t.playerId!=d.inst.selfPlayer.playerId){var e=this._tankMap[t.playerId];if(e){e.fireBullet(t,t.rz);e.shootAnim()}}},s.onTankAttack=function(t){if(this._tankMap[t.targetId]&&t.deltaHp){var e=u(this.damageLabelPrefab);this.damageRoot.addChild(e);var a=t.attackPoint;e.setWorldPosition(a.x,a.y,a.z),e.getComponent(m).string=t.damage+""}},s.onPlayerRevive=function(t){var e=this._tankMap[t.playerId];e&&e.setState(t.hp<=0?"destroyed":"normal")},s.onPlayerDie=function(t){var e=this._tankMap[t.playerId];e&&(e.setState(t.hp<=0?"destroyed":"normal"),t.playerId==d.inst.selfPlayer.playerId&&tgx.UIMgr.inst.showUI(P))},s.createTank=function(){var t=i(r().mark((function t(e){var a,n,o,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u(this.tankPrefab),this.objectsRoot.addChild(a),a.setWorldPosition(e.x,e.y,e.z),a.setWorldRotationFromEuler(0,0,e.rotation),e.uid==T.inst.uid&&((n=a.addComponent(U)).needRotation=!0,n.moveSpeed=200,this.followTarget.target=a,a.addComponent(g)),(o=a.getComponent(I)).player=e,this._tankMap[e.playerId]=o,i=u(this.namePrefab),this.namesRoot.addChild(i),o.nameBar=i.getComponent(R),o.nameBar.hpPercent=e.hp/e.maxHp,t.next=14,T.inst.rpc_GetUserInfo(e.uid);case 14:if(t.t0=t.sent.name,t.t0){t.next=17;break}t.t0="";case 17:o.nameBar.name=t.t0,o.setColor(e.color),o.setState(e.hp<=0?"destroyed":"normal");case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.update=function(t){var e;null==(e=d.inst.selfPlayer)||e.hp},e}(k)).prototype,"tankPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(B.prototype,"namePrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(B.prototype,"damageLabelPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(B.prototype,"objectsRoot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(B.prototype,"groundEffect",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(B.prototype,"namesRoot",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(B.prototype,"damageRoot",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(B.prototype,"followTarget",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=B))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/TankLobbyScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneUtils.ts","./UserMgr.ts","./UI_SearchingRival.ts","./SceneDef.ts","./UICreateRoom.ts","./UIChat.ts","./UIAnnouncement.ts","./NetGameServer.ts","./RoomMgr.ts","./LanguageData.ts"],(function(n){var t,e,r,o,c,i,a,s,u,l,f,p,g,h,U,y,I,m,b,x;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,r=n.initializerDefineProperty,o=n.assertThisInitialized,c=n.asyncToGenerator,i=n.regeneratorRuntime},function(n){a=n.cclegacy,s=n._decorator,u=n.UITransform,l=n.Component},function(n){f=n.SceneUtil},function(n){p=n.UserMgr},function(n){g=n.UI_SearchingRival},function(n){h=n.SceneDef},function(n){U=n.UICreateRoom},function(n){y=n.UIChat},function(n){I=n.UIAnnouncement},function(n){m=n.lobbyNet},function(n){b=n.RoomMgr},function(n){x=n.LanguageData}],execute:function(){var d,v,S,k,w;a._RF.push({},"e51dcDra1xLD7v4fpQrvbt8","TankLobbyScene",void 0);var L=s.ccclass,M=s.property;n("TankLobbyScene",(d=L("TankLobbyScene"),v=M(u),d((w=t((k=function(n){function t(){for(var t,e=arguments.length,c=new Array(e),i=0;i<e;i++)c[i]=arguments[i];return t=n.call.apply(n,[this].concat(c))||this,r(t,"announcementPlacer",w,o(t)),t}e(t,n);var a=t.prototype;return a.start=function(){var n=c(i().mark((function n(){var t=this;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(p.inst.uid){n.next=3;break}return tgx.SceneUtil.loadScene(h.START),n.abrupt("return");case 3:tgx.UIMgr.inst.closeAll(),"http"!=m.type&&tgx.UIMgr.inst.showUI(y,null,null,m),tgx.UIMgr.inst.showUI(I,(function(n){n.setPosition(t.announcementPlacer.node.position.x,t.announcementPlacer.node.position.y,.3,.05)}));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),a.onBtnLobby=function(){f.loadScene(h.LOBBY)},a.onBtnQuickPlayClicked=function(){var n=this;tgx.UIMgr.inst.showUI(g,(function(t){n.scheduleOnce((function(){t.startMatch("tank")}),1.5)}))},a.onBtnExit=function(){var n=c(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:tgx.UIAlert.show(x.getLangByID("exit_game"),!0).onClick(c(i().mark((function n(t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=3;break}return n.next=3,b.inst.exitRoom();case 3:case"end":return n.stop()}}),n)}))));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),a.onBtnTraningModeClicked=function(){tgx.UIAlert.show("开发中，敬请期待！")},a.onBtnCreate=function(){tgx.UIMgr.inst.showUI(U)},a.update=function(n){},t}(l)).prototype,"announcementPlacer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=k))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/TankMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"3c7bcO3f85NK40HPRjCTaYs","TankMgr",void 0),t("TankMgr",function(){function t(){this._tankList=[]}var i=t.prototype;return i.addTank=function(t){this._tankList.push(t)},i.removeTank=function(t){this._tankList.splice(this._tankList.indexOf(t),1)},n(t,[{key:"tankList",get:function(){return this._tankList}}],[{key:"inst",get:function(){return null==this._inst&&(this._inst=new t),this._inst}}]),t}())._inst=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/TankMovement2D.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TankGameMgr.ts"],(function(e){var t,n,o,i,r,a,p;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.Vec3,r=e.director},function(e){a=e.TankGameEvent,p=e.TankGameMgr}],execute:function(){var s;n._RF.push({},"e6382VpSK5LSZMkbi5VXWW0","TankMovement2D",void 0);var c=o.ccclass,l=(o.property,new i);e("TankMovement2D",c("TankMovement2D")(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this)._tmpSpeedFactor=1,t._speedUpEndTime=0,t}t(n,e);var o=n.prototype;return o.start=function(){e.prototype.start.call(this),r.on(a.PLAYER_DIE,this.onEvent_PlayerDie,this)},o.onDestroy=function(){r.off(a.PLAYER_DIE,this.onEvent_PlayerDie,this)},o.onEvent_PlayerDie=function(e){e.playerId==p.inst.selfPlayer.playerId&&this.onMovementStop()},o.tempSpeedUp=function(e,t){this._tmpSpeedFactor=e,this._speedUpEndTime=Date.now()+t},o.onMovement=function(t,n){p.inst.selfPlayer.hp<=0||e.prototype.onMovement.call(this,t,n)},o.getRealSpeed=function(){return e.prototype.getRealSpeed.call(this)*this._tmpSpeedFactor},o.update=function(t){if(e.prototype.update.call(this,t),this.getRealSpeed()>0&&(this.node.getWorldPosition(l),l.lengthSqr()>225e4)){var n=l.length(),o=l.x/n,i=l.y/n;l.x=1500*o,l.y=1500*i,this.node.setWorldPosition(l)}this._speedUpEndTime>0&&Date.now()>=this._speedUpEndTime&&(this._tmpSpeedFactor=1,this._speedUpEndTime=0)},n}(tgx.CharacterMovement2D))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/UITankGameHUD.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUILayers.ts","./Layout_UITankGameHUD.ts","./TankGameMgr.ts","./ModuleDef.ts","./UserMgr.ts","./NoticeLabel.ts","./RoomMgr.ts","./LanguageData.ts"],(function(t){var e,n,a,r,o,i,s,c,u,l,f,h,m,p,d,v;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t.instantiate,i=t.director,s=t.tween},function(t){c=t.GameUILayers},function(t){u=t.Layout_UITankGameHUD},function(t){l=t.TankGameEvent,f=t.TankGameMgr},function(t){h=t.ModuleDef},function(t){m=t.UserMgr},function(t){p=t.NoticeLabel},function(t){d=t.RoomMgr},function(t){v=t.LanguageData}],execute:function(){var _;r._RF.push({},"c68163UPphBq4oTIeMXvb13","UITankGameHUD",void 0);t("UITankGameHUD",tgx_class(h.TANK)(_=function(t){function r(){var e;return(e=t.call(this,"ui_tank_game_hud/ui_tank_game_hud",c.HUD,u)||this)._noticeItemPrefab=void 0,e._noticeItemPool=[],e}e(r,t);var h=r.prototype;return h.getNoticeItemFromPool=function(){var t=this._noticeItemPool.pop();t||(t=o(this._noticeItemPrefab).getComponent(p));return t.node.parent=this._layout.noticeRoot,t},h.putNoticeItemToPool=function(t){t.node.removeFromParent(),this._noticeItemPool.push(t)},h.onCreated=function(){var t=this._layout;this._noticeItemPrefab=t.noticeRoot.children[0],t.noticeRoot.removeAllChildren(),this.onButtonEvent(t.btnExit,(function(){tgx.UIAlert.show(v.getLangByID("exit_game"),!0).onClick(n(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e){t.next=2;break}return t.abrupt("return");case 2:d.inst.exitRoom();case 3:case"end":return t.stop()}}),t)}))))})),t.lblRoomId.string=d.inst.data.displayId,this.refreshPlayerNumLabel(),i.on(l.PLAYER_COMES,this.onEvent_PlyaerComes,this),i.on(l.PLAYER_LEAVES,this.onEvent_PlayerLeaves,this),i.on(l.TANK_ATTACK,this.onEvent_TankAttack,this)},h.onDispose=function(){i.off(l.PLAYER_COMES,this.onEvent_PlyaerComes,this),i.off(l.PLAYER_LEAVES,this.onEvent_PlayerLeaves,this),i.off(l.TANK_ATTACK,this.onEvent_TankAttack,this)},h.onEvent_PlyaerComes=function(){var t=n(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.refreshPlayerNumLabel(),t.next=3,m.inst.rpc_GetUserInfo(e.uid);case 3:(n=t.sent)&&this.addNotice(n.name+" 加入了游戏");case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),h.onEvent_PlayerLeaves=function(){var t=n(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.refreshPlayerNumLabel(),t.next=3,m.inst.rpc_GetUserInfo(e.uid);case 3:(n=t.sent)&&this.addNotice(n.name+" 离开了游戏");case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),h.onEvent_TankAttack=function(){var t=n(a().mark((function t(e){var n,r,o,i,s,c,u,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=f.inst.getPlayer(e.targetId)).hp<=0&&e.deltaHp)){t.next=26;break}if(i=f.inst.getPlayer(e.attackerId),s="你",i.playerId==(null==(r=f.inst.selfPlayer)?void 0:r.playerId)){t.next=14;break}return t.next=7,m.inst.rpc_GetUserInfo(i.uid);case 7:if(t.t0=c=t.sent,null!=t.t0){t.next=12;break}t.t1=void 0,t.next=13;break;case 12:t.t1=c.name;case 13:s=t.t1;case 14:if(u="你",n.playerId==(null==(o=f.inst.selfPlayer)?void 0:o.playerId)){t.next=25;break}return t.next=18,m.inst.rpc_GetUserInfo(n.uid);case 18:if(t.t2=l=t.sent,null!=t.t2){t.next=23;break}t.t3=void 0,t.next=24;break;case 23:t.t3=l.name;case 24:u=t.t3;case 25:this.addNotice(s+" 击败了 "+u);case 26:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),h.addNotice=function(t){var e=this,n=this.getNoticeItemFromPool();n.string=t,n.alpha=255,s(n).to(3,{alpha:0}).call((function(){e.putNoticeItemToPool(n)})).start()},h.refreshPlayerNumLabel=function(){this._layout.lblPlayerNum.string="人数："+d.inst.data.playerNum+"/"+d.inst.data.maxPlayerNum},h.onUpdate=function(t){var e=f.inst.selfPlayer;null!=e&&(this._layout.lblPos.string="x:"+~~e.x+", y:"+~~e.y)},r}(tgx.UIController))||_);r._RF.pop()}}}));

System.register("chunks:///_virtual/UITankGameMask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ModuleDef.ts","./GameUILayers.ts","./Layout_UITankGameMask.ts","./TankGameMgr.ts"],(function(e){var a,t,r,n,i,s,o,c,f,l,h,u,_,d,g,m,y;return{setters:[function(e){a=e.inheritsLoose,t=e.assertThisInitialized},function(e){r=e.cclegacy,n=e._decorator,i=e.Vec4,s=e.find,o=e.Camera,c=e.UITransform,f=e.director,l=e.screen,h=e.RenderTexture,u=e.SpriteFrame},function(e){_=e.ModuleDef},function(e){d=e.GameUILayers},function(e){g=e.Layout_UITankGameMask},function(e){m=e.TankGameEvent,y=e.TankGameMgr}],execute:function(){var p;r._RF.push({},"025709R/91MHoEIgAMmLjfq","UITankGameMask",void 0);n.ccclass,n.property;var v=new i;e("UITankGameMask",tgx_class(_.TANK)(p=function(e){function r(){var a;return(a=e.call(this,"ui_tank_game_mask/ui_tank_game_mask",d.GAME,g)||this)._camera=void 0,a._rt=void 0,a._handle=void 0,a._fogOfWarTrans=void 0,a._pass=void 0,a._fogOfWarCenterRadius=200,a._fogOfWarFadeOutRange=400,f.on(m.PLAYER_DIE,a.onPlayerDie,t(a)),f.on(m.PLAYER_REVIVE,a.onPlayerRevive,t(a)),a}a(r,e);var n=r.prototype;return n.onCreated=function(){this._camera=s("SceneRoot2D/Camera").getComponent(o);var e=this._layout;this._fogOfWarTrans=e.sprFogOfWar.getComponent(c),e.sprGrayScreen.node.active=!1,this._pass=e.sprFogOfWar.customMaterial.passes[0],this._handle=this._pass.getHandle("fogOfWarParams")},n.onUpdate=function(e){v.set(this._fogOfWarTrans.width,this._fogOfWarTrans.height,this._fogOfWarCenterRadius,this._fogOfWarFadeOutRange),this._pass.setUniform(this._handle,v)},n.onDispose=function(){var e;f.off(m.PLAYER_DIE,this.onPlayerDie,this),f.off(m.PLAYER_REVIVE,this.onPlayerRevive,this),this.normalScreen(),null==(e=this._rt)||e.destroy()},n.grayScreen=function(){var e=this._layout;if(e.sprGrayScreen.node.active=!0,!this._rt){var a=l.windowSize,t=l.devicePixelRatio;t>1.5&&(t=1.5);var r=Math.floor(a.width*t),n=Math.floor(a.height*t),i=r/n;r>2048&&(r=2048,n=Math.floor(r/i)),n>2048&&(n=2048,r=Math.floor(n*i)),this._rt=new h,this._rt.initialize({width:r,height:n});var s=new u;s.texture=this._rt,e.sprGrayScreen.spriteFrame=s,e.sprGrayScreen.grayscale=!0}this._camera.targetTexture=this._rt},n.normalScreen=function(){this._layout.sprGrayScreen.node.active=!1,this._camera.targetTexture=null},n.onPlayerDie=function(e){e.playerId==y.inst.selfPlayer.playerId&&this.grayScreen()},n.onPlayerRevive=function(e){e.playerId==y.inst.selfPlayer.playerId&&this.normalScreen()},r}(tgx.UIController))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/UITankGameRank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUILayers.ts","./Layout_UITankGameRank.ts","./TankGameMgr.ts","./TankGameRankItem.ts","./UserMgr.ts","./ModuleDef.ts"],(function(n){var e,t,a,r,s,o,i,c,u,f,h,k,l;return{setters:[function(n){e=n.inheritsLoose,t=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){r=n.cclegacy,s=n.director,o=n.instantiate},function(n){i=n.GameUILayers},function(n){c=n.Layout_UITankGameRank},function(n){u=n.TankGameEvent,f=n.TankGameMgr},function(n){h=n.TankGameRankItem},function(n){k=n.UserMgr},function(n){l=n.ModuleDef}],execute:function(){var R;r._RF.push({},"1b839BYiPBEj5VQ46lrZgs/","UITankGameRank",void 0);n("UITankGameRank",tgx_class(l.TANK)(R=function(n){function r(){return n.call(this,"ui_tank_game_rank/ui_tank_game_rank",i.HUD,c)||this}e(r,n);var l=r.prototype;return l.onCreated=function(){this.refreshRank(),s.on(u.PLAYER_COMES,this.refreshRank,this),s.on(u.PLAYER_LEAVES,this.refreshRank,this),s.on(u.PLAYER_DATA_CHANGED,this.onEvent_PlayerDataChanged,this)},l.onDispose=function(){s.off(u.PLAYER_COMES,this.refreshRank,this),s.off(u.PLAYER_LEAVES,this.refreshRank,this),s.off(u.PLAYER_DATA_CHANGED,this.onEvent_PlayerDataChanged,this)},l.onEvent_PlayerDataChanged=function(n){null!=n.score&&this.refreshRank()},l.refreshRank=function(){var n=t(a().mark((function n(){var e,t,r,s,i,c,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(e=f.inst.gameData.players).sort((function(n,e){return e.score-n.score})),(t=this._layout).listRoot.children.forEach((function(n){n.active=!1})),r=0;case 5:if(!(r<10)){n.next=20;break}if(s=e[r]){n.next=9;break}return n.abrupt("break",20);case 9:return(i=t.listRoot.children[r])||(i=o(t.listRoot.children[0]),t.listRoot.addChild(i)),i.active=!0,c=i.getComponent(h),n.next=15,k.inst.rpc_GetUserInfo(s.uid);case 15:u=n.sent.name,c.setInfo(r+1,u,s.score);case 17:++r,n.next=5;break;case 20:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),r}(tgx.UIController))||R);r._RF.pop()}}}));

System.register("chunks:///_virtual/UITankJoystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameUILayers.ts","./Layout_UITankJoystick.ts","./TankGameMgr.ts","./ModuleDef.ts"],(function(t){var n,o,i,e,s,c,a,u;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t.KeyCode},function(t){e=t.GameUILayers},function(t){s=t.Layout_UITankJoystick},function(t){c=t.TankGameMgr,a=t.TankSkill},function(t){u=t.ModuleDef}],execute:function(){var r;o._RF.push({},"894c0mvZI1CgpoKn3zhM4+1","UITankJoystick",void 0);var l=[a.SKILL_1,a.SKILL_2];t("UITankJoystick",tgx_class(u.TANK)(r=function(t){function o(){return t.call(this,"ui_tank_joystick/ui_tank_joystick",e.JOY_STICK,s)||this}n(o,t);var u=o.prototype;return u.onCreated=function(){tgx.UIJoystick.inst.cleanKeyMap(),tgx.UIJoystick.inst.bindKeyToButton(i.KEY_J,"btn_skill_1"),tgx.UIJoystick.inst.bindKeyToButton(i.KEY_K,"btn_skill_2")},u.onUpdate=function(t){var n=this._layout;l.forEach((function(t){var o=0,i=c.inst.getSkillCd(t);i&&(o=i.cdPercent),n.cdSprites[t-a.SKILL_1].fillRange=o}))},o}(tgx.UIController))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/UITankRevive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ModuleDef.ts","./GameUILayers.ts","./Layout_UITankRevive.ts","./TankGameMgr.ts"],(function(e){var n,t,i,a,r,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){i=e.ModuleDef},function(e){a=e.GameUILayers},function(e){r=e.Layout_UITankRevive},function(e){o=e.TankGameMgr}],execute:function(){var s;t._RF.push({},"e60d8lbwGpPRrIAt6ZuAnvU","UITankRevive",void 0);e("UITankRevive",tgx_class(i.TANK)(s=function(e){function t(){var n;return(n=e.call(this,"ui_tank_revive/ui_tank_revive",a.POPUP,r)||this)._endTime=0,n._endTime=Date.now()+o.inst.selfPlayer.reviveTime+500,n}n(t,e);var i=t.prototype;return i.onCreated=function(){},i.onUpdate=function(e){var n;if((null==(n=o.inst.selfPlayer)?void 0:n.hp)>0)this.close();else{var t=this._layout,i=Math.ceil((this._endTime-Date.now())/1e3);if(i<0&&(i=0),i<60)t.lblTime.string=i+"s";else{var a=i%60,r=Math.floor(i/60);t.lblTime.string=r+"m"+a+"s"}}},t}(tgx.UIController))||s);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/module_tank', 'chunks:///_virtual/module_tank'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});