System.register("chunks:///_virtual/AudioPlayer.ts",["cc","./ModuleDef.ts"],(function(t){var n,o;return{setters:[function(t){n=t.cclegacy},function(t){o=t.ModuleDef}],execute:function(){n._RF.push({},"7f38ftaf7VAoKxMHygl0tll","AudioPlayer",void 0);t("AudioPlayer",function(){function t(){}return t.playOneShot=function(t,n){void 0===n&&(n=1),tgx.AudioMgr.inst.playOneShot(t,n,o.BILLIARDS)},t.play=function(t,n){void 0===n&&(n=1),tgx.AudioMgr.inst.play(t,n,o.BILLIARDS)},t.stop=function(){tgx.AudioMgr.inst.stop()},t.pause=function(){tgx.AudioMgr.inst.pause()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BallCollision.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var l,e,n,t,i,r,s;return{setters:[function(o){l=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,t=o.v3,i=o.Collider,r=o.RigidBody,s=o.Component}],execute:function(){var a,c;e._RF.push({},"22421B5BOZP34cyF50mHnVi","BallCollision",void 0);var u=n.ccclass,d=(n.property,t()),p=t();o("BallCollision",u("BallCollision")(((c=function(o){function e(){return o.apply(this,arguments)||this}l(e,o);var n=e.prototype;return n.start=function(){this.getComponent(i).on("onCollisionEnter",this.onCollisionEnter)},n.onCollisionEnter=function(o){var l=o.otherCollider.node.name;if("TablePlane"!=l&&"table_side"!=l&&"table"!=l){o.selfCollider.node.getComponent(r).getLinearVelocity(d),o.otherCollider.node.getComponent(r).getLinearVelocity(p);var n=d.length()+p.length();n>e.collideWithBalls&&(e.collideWithBalls=n)}},e}(s)).collideWithBalls=0,a=c))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/BallUVSetter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,l,r,n,a,s,o;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,l=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.MeshRenderer,o=t.Component}],execute:function(){var c,u,f;n._RF.push({},"fd564k5LIpGa4bP2/uZ8c2P","BallUVSetter",void 0);var d=a.ccclass,p=a.property,h=a.executeInEditMode;t("BallUVSetter",d("BallUVSetter")(c=h((f=e((u=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,l(e,"ballId",f,r(e)),e._lastBallId=-1,e}i(e,t);var n=e.prototype;return n.start=function(){this.setTilingOffset(this.ballId)},n.setTilingOffset=function(t){var e=(10+124*(t%3))/512,i=(10+64*Math.floor(t/3))/512;this.node.getComponent(s).setInstancedAttribute("a_tilingOffset",[.234375,.1171875,e,i])},n.update=function(t){this._lastBallId!=this.ballId&&(this.setTilingOffset(this.ballId),this._lastBallId=this.ballId)},e}(o)).prototype,"ballId",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=u))||c)||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/BilliardsGameHUD.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserMgr.ts","./SceneDef.ts","./GamePlayerInfo.ts","./BilliardsGameMgr.ts","./UIChat.ts","./RoomMgr.ts","./NetGameServer.ts","./SubGameMessage.ts"],(function(t){var e,i,n,r,s,a,o,l,c,h,u,f,d,p,m,g,y,U,R,b,S,v,I,L,w,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,s=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){o=t.cclegacy,l=t._decorator,c=t.Label,h=t.Button,u=t.Node,f=t.director,d=t.Component,p=t.Sprite,m=t.instantiate},function(t){g=t.UserMgr},function(t){y=t.SceneDef},function(t){U=t.GamePlayerInfo},function(t){R=t.BilliardsGameMgr,b=t.BilliardsGameEvent},function(t){S=t.UIChat},function(t){v=t.RoomMgr,I=t.RoomEvent,L=t.GameMode},function(t){w=t.gameNet},function(t){E=t.SubGameMessage}],execute:function(){var C,_,M,G,B,P,A,N,x,D,H,O,k,T,W;o._RF.push({},"f80e8HF1llD6ovoBb5vjtrE","BilliardsGameHUD",void 0);var z=l.ccclass,F=l.property;t("BilliardsGameHUD",(C=z("BilliardsGameHUD"),_=F(U),M=F(U),G=F(c),B=F(h),P=F(u),A=F(c),C((D=e((x=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"leftPlayer",D,r(e)),n(e,"rightPlayer",H,r(e)),n(e,"tips",O,r(e)),n(e,"btnReady",k,r(e)),n(e,"watcherList",T,r(e)),n(e,"lblRoomId",W,r(e)),e}i(e,t);var o=e.prototype;return o.start=function(){g.inst.uid?(tgx.UIMgr.inst.closeAll(),this.initEventListener(),v.inst.isOnline?(v.inst.rpc_Ready(),this.reStart()):this.onRoomBackByRoomMgr()):tgx.SceneUtil.loadScene(y.START)},o.reStart=function(){v.inst.rpc_ClientReady()},o.onRoomBackByRoomMgr=function(){v.inst.isOnline?this.lblRoomId.string=v.inst.data.displayId:this.lblRoomId.string="",this.initUser(),this.initWatcherList(),this.updateCtrlUI(),v.inst.isOnline&&tgx.UIMgr.inst.showUI(S,null,null,w)},o.initUser=function(){if(v.inst.isOnline){this.leftPlayer.setUserId(R.inst.leftUserId),this.rightPlayer.setUserId(R.inst.rightUserId);var t=v.inst.selfUser;this.btnReady.node.active=t&&t.playerId&&!t.ready}else this.btnReady.node.active=!1,this.rightPlayer.node.active=!1,this.leftPlayer.setUserId(g.inst.uid)},o.initEventListener=function(){f.on(b.TURN_PLAYER_CHANGED,this.updateCtrlUI,this),f.on(I.NEW_USER_COMES,this.onNewUserComes,this),f.on(I.USER_LEAVES,this.onUserLeaves,this),f.on(I.WATCHER_LIST_CHANGED,this.initWatcherList,this),f.on(b.ROOM_PUSH,this.onRoomBackByRoomMgr,this),f.on(E.EnterSubGameRoomSuccess,this.reStart,this)},o.onDestroy=function(){f.off(b.TURN_PLAYER_CHANGED,this.updateCtrlUI,this),f.off(I.NEW_USER_COMES,this.onNewUserComes,this),f.off(I.USER_LEAVES,this.onUserLeaves,this),f.off(I.WATCHER_LIST_CHANGED,this.initWatcherList,this),f.off(b.ROOM_PUSH,this.onRoomBackByRoomMgr,this),f.off(E.EnterSubGameRoomSuccess,this.reStart,this)},o.onNewUserComes=function(t){t.isPlayer?this.initUser():this.initWatcherList()},o.onUserLeaves=function(t){t.isPlayer?this.initUser():this.initWatcherList()},o.initWatcherList=function(){var t=s(a().mark((function t(){var e,i,n,r,s,o,l,c,h,u,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.watcherList.parent.active=!1,i=null==(e=v.inst.data)?void 0:e.userList,v.inst.isOnline&&i.length){t.next=4;break}return t.abrupt("return");case 4:for(this.watcherList.parent.active=!0,n=0;n<this.watcherList.children.length;++n)this.watcherList.children[n].active=!1;for(r=[],s=this.watcherList.children[0],o=0;o<i.length;++o)(l=i[o]).playerId||(c=m(s),this.watcherList.addChild(c),r.push(l.uid));return t.next=11,g.inst.rpc_GetUserInfos(r);case 11:for(h=0;h<r.length;++h)(u=this.watcherList.children[h]).active=!0,f=u.children[0].getComponent(p),g.inst.setUserIconAndName(r[h],f);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.updateCtrlUI=function(){v.inst.gameMode==L.SOLO?this.tips.string="单人练习":v.inst.gameMode==L.AI?this.tips.string="人机对决":v.inst.isWatcher?this.tips.string="观战中...":v.inst.data.playerNum<2?this.tips.string="等待对手加入...":R.inst.isMyTurn?this.tips.string="该你击球...":this.tips.string="对手击球..."},o.onBtnReadyClicked=function(){v.inst.rpc_Ready()},o.onBtnExitClicked=function(){var t=s(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v.inst.isOnline?v.inst.isPlayer&&v.inst.isPlaying?tgx.UIAlert.show("确定要认输并退出吗？",!0).onClick(s(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&v.inst.exitRoom();case 1:case"end":return t.stop()}}),t)})))):v.inst.exitRoom():tgx.UIAlert.show("球局未结束，确定离开吗？",!0).onClick((function(t){t&&tgx.SceneUtil.loadScene(R.inst.entryScene)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e}(d)).prototype,"leftPlayer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(x.prototype,"rightPlayer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(x.prototype,"tips",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(x.prototype,"btnReady",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(x.prototype,"watcherList",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(x.prototype,"lblRoomId",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=x))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/BilliardsGameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMgr.ts","./SubGameMgr.ts","./UserMgr.ts","./NetGameServer.ts","./RoomMgr.ts","./SubGameDef.ts","./ModuleDef.ts"],(function(e){var t,a,i,s,n,r,l,u,h,o,_,g;return{setters:[function(e){t=e.inheritsLoose,a=e.createClass},function(e){i=e.cclegacy,s=e.director,n=e.Vec3},function(e){r=e.GameMgr},function(e){l=e.SubGameMgr},function(e){u=e.UserMgr},function(e){h=e.gameNet},function(e){o=e.RoomMgr},function(e){_=e.SubGameDef},function(e){g=e.ModuleDef}],execute:function(){i._RF.push({},"145a74dL2hBz7d0oAV4Twlf","BilliardsGameMgr",void 0);var d=e("BilliardsGameEvent",(function(){}));d.ROOM_PUSH="BilliardsGameEvent.ROOM_PUSH",d.HIT_BALL="BilliardsGameEvent.HIT_BALL",d.HIT_BALL_COMPLETE="BilliardsGameEvent.HIT_BALL_COMPLETE",d.CUE_CHANGED="BilliardsGameEvent.CUE_CHANGED",d.BALL_SYNC="BilliardsGameEvent.BALL_SYNC",d.TURN_PLAYER_CHANGED="BilliardsGameEvent.TURN_PLAYER_CHANGED",d.PLAYER_DATA_CHANGED="BilliardsGameEvent.PLAYER_DATA_CHANGED",d.GAME_BEGIN="BilliardsGameEvent.GAME_BEBIN",d.GAME_OVER="BilliardsGameEvent.GAME_OVER",d.PLAYER_COMES="BilliardsGameEvent.PLAYER_COMES",d.PLAYER_LEAVES="BilliardsGameEvent.PLAYER_LEAVES";var m=e("BilliardsGameMgr",function(e){function i(){var t;return(t=e.call(this)||this)._gameData=void 0,t.order=void 0,t.cueDir=void 0,t._gameType=_.BILLIARDS,t._entryScene={name:"lobby_billiards",bundle:g.BILLIARDS},t._gameScene={name:"game_billiards",bundle:g.BILLIARDS},t.initNetMsgHandlers(),t}t(i,e);var r=i.prototype;return r.initNetMsgHandlers=function(){h.listenMsg("billiards/GameDataSyncPush",this.onNet_GameDataSyncPush,this),h.listenMsg("billiards/GameDataChangedPush",this.onNet_GameDataChangedPush,this),h.listenMsg("billiards/PlayerComesPush",this.onNet_PlayerComesPush,this),h.listenMsg("billiards/PlayerDataChangedPush",this.onNet_PlayerDataChangedPush,this),h.listenMsg("billiards/PlayerLeavesPush",this.onNet_PlayerLeavesPush,this),h.listenMsg("billiards/GameBeginPush",this.onNet_GameBeginPush,this),h.listenMsg("billiards/GameOverPush",this.onNet_GameOverPush,this),h.listenMsg("billiards/HitBall",this.onNet_HitBallPush,this),h.listenMsg("billiards/HitBallComplete",this.onNet_HitBallCompletePush,this),h.listenMsg("billiards/AdjustCue",this.onNet_AdjustCuePush,this)},r.reset=function(){e.prototype.reset.call(this),this._gameData=null,this.cueDir=null,this.cueDir=null},r.initSoloMode=function(){o.inst.reset(),this.reset(),l.gameMgr=this},r.getPlayer=function(e){if(!this._gameData||!this._gameData.players)return null;for(var t=0;t<this._gameData.players.length;++t){var a=this._gameData.players[t];if(a.uid==e)return a}return null},r.getPlayerIndex=function(e){for(var t=0;t<this._gameData.players.length;++t)if(this._gameData.players[t].uid==e)return t;return-1},r.isPocketed=function(e){if(!this._gameData||!this._gameData.players)return!1;for(var t=0;t<this._gameData.players.length;++t){var a=this._gameData.players[t];if(a.pocketedBalls&&-1!=a.pocketedBalls.indexOf(e))return!0}return!1},r.sendMsg_HitBall=function(e){h.sendMsg("billiards/HitBall",e)},r.sendMsg_HitBallComplete=function(e){h.sendMsg("billiards/HitBallComplete",e)},r.sendMsg_AdjustCue=function(e){h.sendMsg("billiards/AdjustCue",e)},r.sendMsg_BallsDataSync=function(e){h.sendMsg("billiards/BallsDataSync",e)},r.onNet_GameDataSyncPush=function(e){this._gameData=e,console.log("game data",e),s.emit(d.ROOM_PUSH)},r.onNet_GameDataChangedPush=function(e){this._gameData&&(void 0!==e.ballsData&&(this._gameData.ballsData=e.ballsData,this.isMyTurn||s.emit(d.BALL_SYNC,e.ballsData)),void 0!==e.order&&(this.order=e.order),void 0!==e.cueDir&&(this.cueDir||(this.cueDir=new n),this.cueDir.set(e.cueDir.x,e.cueDir.y,e.cueDir.z)),void 0!==e.currentPlayer&&(this._gameData.currentPlayer=e.currentPlayer,s.emit(d.TURN_PLAYER_CHANGED,e.currentPlayer)))},r.onNet_PlayerComesPush=function(e){this._gameData.players.push(e.player),s.emit(d.PLAYER_COMES,e.player)},r.onNet_PlayerDataChangedPush=function(e){var t=this.getPlayer(e.uid);t&&(null!=e.pocketedBalls&&(t.pocketedBalls=e.pocketedBalls),s.emit(d.PLAYER_DATA_CHANGED,e))},r.onNet_PlayerLeavesPush=function(e){for(var t=0;t<this._gameData.players.length;++t){if(this._gameData.players[t].uid==e.uid){this._gameData.players.splice(t,1),s.emit(d.PLAYER_LEAVES,e.uid);break}}},r.onNet_GameBeginPush=function(e){this._gameData&&(this._gameData.ballsData=null,this._gameData.players.forEach((function(e){e.pocketedBalls=[]})),s.emit(d.GAME_BEGIN))},r.onNet_GameOverPush=function(e){s.emit(d.GAME_OVER,e)},r.onNet_HitBallPush=function(e){this._gameData&&(this.isMyTurn||s.emit(d.HIT_BALL,e.hitImpulse,e.order))},r.onNet_HitBallCompletePush=function(e){this._gameData&&s.emit(d.HIT_BALL_COMPLETE)},r.onNet_AdjustCuePush=function(e){this._gameData&&(e.direction&&(this.cueDir||(this.cueDir=new n),this.cueDir.set(e.direction.x,e.direction.y,e.direction.z)),this.isMyTurn||s.emit(d.CUE_CHANGED,e))},a(i,[{key:"gameData",get:function(){return this._gameData}},{key:"selfPlayer",get:function(){return this.getPlayer(u.inst.uid)}},{key:"selfPlayerIndex",get:function(){return this.getPlayerIndex(u.inst.uid)}},{key:"leftUserId",get:function(){return this._gameData&&0!=this._gameData.players.length?o.inst.isPlayer?u.inst.uid:this._gameData.players[0].uid:""}},{key:"rightUserId",get:function(){if(!this._gameData||0==this._gameData.players.length)return"";if(o.inst.isPlayer){if(this._gameData.players[0].uid!=u.inst.uid)return this._gameData.players[0].uid;var e=this._gameData.players[1];return e?e.uid:""}var t=this._gameData.players[1];return t?t.uid:""}},{key:"isMyTurn",get:function(){return!!this._gameData&&(!!o.inst.isPlayer&&(!!this._gameData.currentPlayer&&this._gameData.currentPlayer==u.inst.uid))}}],[{key:"inst",get:function(){return this._inst||(this._inst=new i),this._inst}}]),i}(r));m._inst=void 0,l.inst.registerGameMgr(m.inst),i._RF.pop()}}}));

System.register("chunks:///_virtual/BilliardsLobbyScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneUtils.ts","./UserMgr.ts","./UI_SearchingRival.ts","./SceneDef.ts","./BilliardsGameMgr.ts","./UICreateRoom.ts","./UIChat.ts","./UIAnnouncement.ts","./NetGameServer.ts","./UIRoomList.ts"],(function(n){var t,e,i,o,r,c,a,s,l,u,f,g,p,U,d,h,I,S,m,y;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized,r=n.asyncToGenerator,c=n.regeneratorRuntime},function(n){a=n.cclegacy,s=n._decorator,l=n.Node,u=n.Component},function(n){f=n.SceneUtil},function(n){g=n.UserMgr},function(n){p=n.UI_SearchingRival},function(n){U=n.SceneDef},function(n){d=n.BilliardsGameMgr},function(n){h=n.UICreateRoom},function(n){I=n.UIChat},function(n){S=n.UIAnnouncement},function(n){m=n.lobbyNet},function(n){y=n.UIRoomList}],execute:function(){var b,x,M,v,B;a._RF.push({},"26761xan0FF2J62SjTdMxFQ","BilliardsLobbyScene",void 0);var L=s.ccclass,R=s.property;n("BilliardsLobbyScene",(b=L("BilliardsLobbyScene"),x=R(l),b((B=t((v=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return t=n.call.apply(n,[this].concat(r))||this,i(t,"announcementPlacer",B,o(t)),t}e(t,n);var a=t.prototype;return a.start=function(){var n=r(c().mark((function n(){var t=this;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(g.inst.uid){n.next=3;break}return tgx.SceneUtil.loadScene(U.START),n.abrupt("return");case 3:tgx.UIMgr.inst.closeAll(),"http"!=m.type&&tgx.UIMgr.inst.showUI(I,null,null,m),tgx.UIMgr.inst.showUI(S,(function(n){n.setPosition(t.announcementPlacer.position.x,t.announcementPlacer.position.y)}));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),a.onBtnLobby=function(){f.loadScene(U.LOBBY)},a.onBtnQuickPlayClicked=function(){var n=this;tgx.UIMgr.inst.showUI(p,(function(t){n.scheduleOnce((function(){t.startMatch("billiards")}),1.5)}))},a.onBtnRoomListClicked=function(){tgx.UIMgr.inst.showUI(y)},a.onBtnTraningModeClicked=function(){d.inst.initSoloMode(),tgx.UIWaiting.show(),tgx.SceneUtil.loadScene(d.inst.gameScene)},a.onBtnCreate=function(){tgx.UIMgr.inst.showUI(h)},a.update=function(n){},t}(u)).prototype,"announcementPlacer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=v))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/BilliardTableControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HitIndicator.ts","./UserMgr.ts","./AudioPlayer.ts","./BilliardsGameMgr.ts","./FixedPhysics.ts","./BallCollision.ts","./PocketTrigger.ts","./PocktedBalls.ts","./GConst.ts","./RoomMgr.ts"],(function(t){var e,i,n,s,a,l,r,o,h,c,u,d,f,_,p,y,v,g,B,P,b,m,D,w,S,T,E,x,C,O,A,z,I,H,k,M,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,a=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t._decorator,h=t.v3,c=t.geometry,u=t.Slider,d=t.Button,f=t.Node,_=t.Prefab,p=t.Vec3,y=t.instantiate,v=t.MeshRenderer,g=t.PhysicsSystem,B=t.director,P=t.Director,b=t.misc,m=t.SphereCollider,D=t.tween,w=t.RigidBody,S=t.Component,T=t.Input},function(t){E=t.HitIndicator},function(t){x=t.UserMgr},function(t){C=t.AudioPlayer},function(t){O=t.BilliardsGameMgr,A=t.BilliardsGameEvent},function(t){z=t.FixedPhysics},function(t){I=t.BallCollision},function(t){H=t.PocketTrigger},function(t){k=t.PocktedBalls},function(t){M=t.default},function(t){R=t.RoomMgr}],execute:function(){var U,L,N,G,W,F,V,Q,j,Y,q,K,X,J,Z,$,tt,et,it,nt,st,at,lt,rt,ot,ht,ct;r._RF.push({},"44fadAVcvRIbKqBjrglNpm/","BilliardTableControl",void 0);var ut=o.ccclass,dt=o.property,ft=16,_t=.7,pt=h(),yt=h(),vt=h(),gt=[new c.Plane(1,0,0,-23.84),new c.Plane(-1,0,0,-23.84),new c.Plane(0,0,1,-11.11),new c.Plane(0,0,-1,-11.11)],Bt=new c.Ray;t("BilliardTableControl",(U=ut("BilliardTableControl"),L=dt(u),N=dt(u),G=dt(d),W=dt(f),F=dt(f),V=dt(f),Q=dt(f),j=dt(_),Y=dt(_),q=dt(f),K=dt(E),X=dt(k),U(($=e((Z=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,n(e,"powerSlider",$,s(e)),n(e,"directionSlider",tt,s(e)),n(e,"hitButton",et,s(e)),n(e,"cue",it,s(e)),n(e,"whiteBall",nt,s(e)),n(e,"indicatorWhiteBall",st,s(e)),n(e,"beHitBalls",at,s(e)),n(e,"ballPrefab",lt,s(e)),n(e,"tablePrefab",rt,s(e)),n(e,"table",ot,s(e)),n(e,"hitIndicator",ht,s(e)),n(e,"pocketedBalls",ct,s(e)),e._allBalls=new Array(ft),e._impulse=new p,e._cueRot=h(),e._cueOffset=new p,e._hitOffset=new p,e._whiteballOrignalPos=h(),e._ballsPosData=new Array(48),e._ballsQuatData=new Array(64),e._needUpdatePhysics=!1,e._cueSyncData=null,e._lastProgress=.5,e._lastSlideTime=0,e._slideLen=0,e._newPocketedBallIds=[],e._hasPocketed=!1,e._isBallMoveByHit=!1,e._currentHitOrder=0,e._lastSyncTime=0,e._isGameOver=!1,e._fixedDt=Math.floor(1/M.MAX_FPS*1e4)/1e4,e}i(e,t);var r=e.prototype;return r.start=function(){if(this.cue.getPosition(this._cueOffset),this._hitOffset.set(this._cueOffset),this._hitOffset.x=-7.65,this.cue.parent.setPosition(this.whiteBall.position),O.inst.gameData&&O.inst.gameData.curDirection){var t=O.inst.gameData.curDirection;t&&this.cue.parent.setRotationFromEuler(t.x,t.y,t.z)}this.indicatorWhiteBall.active=!1,this._currentHitOrder=0,O.inst.gameData&&(this._currentHitOrder=O.inst.order);for(var e=0;e<ft;++e)this._allBalls[e]=0==e?this.whiteBall:this.beHitBalls.children[e-1];if(this._whiteballOrignalPos.set(this._allBalls[0].worldPosition),R.inst.isOnline){var i=null;i=O.inst.gameData&&O.inst.gameData.ballsData?O.inst.gameData.ballsData:this.getSyncData(!1).ballsData,this.doBallsDataSync(i)}var n=this.getSyncData(!1);this.resetBalls(n.ballsData),this.onTurnPlayerChanged(),this.initEventListener()},r.resetBalls=function(t){if(t){for(var e=this._allBalls.length-1;e>=0;--e)this._allBalls[e].destroy();for(var i=0;i<ft;++i){var n=y(this.ballPrefab);n.addComponent(I),this._allBalls[i]=n,0==i?(this.whiteBall=n,n.name=M.hitBallNodeName,this.beHitBalls.parent.addChild(n)):(n.name="ball-"+i,this.beHitBalls.addChild(n)),this.setBallData(i,t),O.inst.isPocketed(i)&&(n.active=!1);var s=(10+124*(i%3))/512,a=(10+64*Math.floor(i/3))/512;n.getComponent(v).setInstancedAttribute("a_tilingOffset",[.234375,.1171875,s,a])}g.instance.physicsWorld.syncSceneToPhysics()}},r.initEventListener=function(){var t=a(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B.on(A.CUE_CHANGED,this.onEvent_CueChanged,this),B.on(A.HIT_BALL,this.onEvent_HitBall,this),B.on(A.TURN_PLAYER_CHANGED,this.onTurnPlayerChanged,this),B.on(A.BALL_SYNC,this.onEvent_BallSync,this),B.on(z.EVENT_UPDATE_FINISHED,this.onEvent_FixedPhysicsUpdateFinished,this),B.on(H.EVENT_HIT_POCKET,this.onPocket,this),this.powerSlider.handle.node.on(T.EventType.TOUCH_END,this.onEvent_TouchEnd,this),this.powerSlider.handle.node.on(T.EventType.TOUCH_CANCEL,this.onEvent_TouchEnd,this),this.directionSlider.handle.node.on(T.EventType.TOUCH_END,this.onDirectionSliderTouchEnd,this),this.directionSlider.handle.node.on(T.EventType.TOUCH_CANCEL,this.onDirectionSliderTouchEnd,this),B.on(P.EVENT_AFTER_UPDATE,this.onEvent_PostUpdate,this),B.on(A.GAME_BEGIN,this.onGameBegin,this),B.on(A.GAME_OVER,this.onGameOver,this);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.onDirectionSliderTouchEnd=function(){this._lastProgress=.5,this.directionSlider.enabled=!1,this.directionSlider.progress=.5,this.directionSlider.enabled=!0,this._lastSlideTime=0},r.onDestroy=function(){B.off(P.EVENT_AFTER_UPDATE,this.onEvent_PostUpdate,this),B.off(A.CUE_CHANGED,this.onEvent_CueChanged,this),B.off(A.HIT_BALL,this.onEvent_HitBall,this),B.off(A.TURN_PLAYER_CHANGED,this.onTurnPlayerChanged,this),B.off(A.BALL_SYNC,this.onEvent_BallSync,this),B.off(z.EVENT_UPDATE_FINISHED,this.onEvent_FixedPhysicsUpdateFinished,this),B.off(H.EVENT_HIT_POCKET,this.onPocket,this),B.off(A.GAME_BEGIN,this.onGameBegin,this),B.off(A.GAME_OVER,this.onGameOver,this)},r.onEvent_BallSync=function(t){O.inst.isMyTurn||this.doBallsDataSync(t)},r.hideIndicator=function(){this.hitIndicator.hideAll(),this.indicatorWhiteBall.active=!1},r.dirToDegree=function(t){t.y=0,t.normalize();var e=Math.atan(-t.z/t.x)/Math.PI*180;return t.x<0?e+=180:e+=360,e},r.checkBorders=function(t){for(var e=-1,i=null,n=0;n<gt.length;++n){var s=c.intersect.rayPlane(t,gt[n]);s>0&&(e<0||s<e)&&(e=s,i=gt[n])}return{mint:e,hitPlane:i}},r.computeLen=function(t,e,i){Bt.o.set(t.x,0,t.z),Bt.d.set(e.x,0,e.z);var n=this.checkBorders(Bt).mint;return n>0&&n<i&&(i=n),i},r.adjustIndicator=function(){this.hitIndicator.hideAll();var t=this.whiteBall.position,e=pt.set(1,0,0),i=b.degreesToRadians(this.cue.parent.eulerAngles.y);p.rotateY(e,e,this.whiteBall.getComponent(m).center,i),Bt.o.set(t.x,t.y,t.z),Bt.d.set(e.x,e.y,e.z),e.normalize();for(var n=-1,s=null,a=1;a<this._allBalls.length;++a){var l=this._allBalls[a];if(l.active){var r=this.predict(t,e,l.position);r>=0&&(n<0||r<n)&&(n=r,s=l)}}if(n>=0){var o=this.indicatorWhiteBall.position;this.indicatorWhiteBall.active=!0,this.indicatorWhiteBall.setPosition(t.x+e.x*n,o.y,t.z+e.z*n),this.hitIndicator.setHitLine(this.cue.parent.eulerAngles.y,t,n);var h=yt;h.normalize(),p.subtract(h,s.position,this.indicatorWhiteBall.position);var c=this.dirToDegree(h),u=this.computeLen(s.position,h,20);this.hitIndicator.setBallLine(c,s.position,u+_t);var d=vt;p.cross(d,e,h),p.cross(e,h,d),e.normalize(),u=this.computeLen(this.indicatorWhiteBall.position,e,10),c=this.dirToDegree(e),this.hitIndicator.setWhiteLine(c,this.indicatorWhiteBall.position,u+_t)}else{var f=this.checkBorders(Bt),_=f.mint,y=f.hitPlane;if(_>0){var v=yt.set(this.indicatorWhiteBall.position);v.x=t.x+e.x*_,v.z=t.z+e.z*_,this.indicatorWhiteBall.setPosition(v),this.hitIndicator.setHitLine(this.cue.parent.eulerAngles.y,t,_);for(var g=!1,B=0;B<this.table.children.length;++B){var P=this.table.children[B],D=P.worldScale.x/2,w=P.worldPosition.x-(v.x+e.x*_t),S=P.worldPosition.z-(v.z+e.z*_t);if(w*w+S*S<D*D){g=!0;break}}if(this.indicatorWhiteBall.active=!g,!g){var T=-2*p.dot(e,y.n),E=vt;E.x=e.x+T*y.n.x,E.y=0,E.z=e.z+T*y.n.z,E.normalize();var x=this.computeLen(v,E,20),C=this.dirToDegree(E);this.hitIndicator.setBallLine(C,v,x+_t)}}else this.indicatorWhiteBall.active=!1}},r.predict=function(t,e,i){var n=t.x-i.x,s=t.z-i.z,a=e.x*e.x+e.z*e.z,l=2*n*e.x+2*s*e.z,r=n*n+s*s-2.8*.7;if(0!=a){var o=l*l-4*a*r;if(o>=0){var h=(-l+Math.sqrt(o))/(2*a),c=(-l-Math.sqrt(o))/(2*a);return h*c<=0?Math.max(h,c):Math.min(h,c)}}else if(0!=l)return-r/l;return-1},r.onGameBegin=function(){var t=a(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tgx.SceneUtil.loadScene(O.inst.gameScene);case 2:this.scheduleOnce((function(){tgx.UIAlert.show("游戏开始")}),1);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.onGameOver=function(){var t=a(l().mark((function t(e){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!R.inst.isPlayer){t.next=4;break}"RIVAL_LEFT"==e.reason?tgx.UIAlert.show("对手认输，你赢了！").onClick((function(){R.inst.exitRoom()})):e.winner==x.inst.uid?tgx.UIAlert.show("你赢了！").onClick((function(){R.inst.exitRoom()})):tgx.UIAlert.show("你输了！").onClick((function(){R.inst.exitRoom()})),t.next=8;break;case 4:return t.next=6,x.inst.rpc_GetUserInfo(e.winner);case 6:i=t.sent,"RIVAL_LEFT"==e.reason?tgx.UIAlert.show("对手认输，玩家["+i.name+"] 获胜！").onClick((function(){R.inst.exitRoom()})):tgx.UIAlert.show("玩家["+i.name+"] 获胜！").onClick((function(){R.inst.exitRoom()}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.onPocket=function(t){for(var e=0;e<this._allBalls.length;++e)if(0!=e&&this._allBalls[e]==t){this._newPocketedBallIds.push(e),this._hasPocketed=!0,O.inst.gameData?this.pocketedBalls.onPocket(O.inst.gameData.currentPlayer,e):this.pocketedBalls.onPocket(x.inst.uid,e);break}t.active=!1,C.playOneShot("sounds/pocket")},r.onEvent_TouchEnd=function(){this.powerSlider.progress>0&&this.onBtnHitBallClicked()},r.isOutOfTable=function(t){return!!t&&(0==t.active||t.position.y<8.4)},r.onEvent_FixedPhysicsUpdateFinished=function(){this.clearPhysicsState(),this._needUpdatePhysics=!1,this.isOutOfTable(this.whiteBall)&&(this.whiteBall.active=!0,this.whiteBall.setWorldPosition(this._whiteballOrignalPos),g.instance.syncSceneToPhysics()),this._isBallMoveByHit&&this.syncActionToServer(!1),this._newPocketedBallIds=[],this._hasPocketed=!1,this._isBallMoveByHit=!1,R.inst.isOnline||this.onTurnPlayerChanged()},r.onPowerChanged=function(t){this.hideIndicator();var e=this._cueOffset.x*t.progress*.5,i=this._cueOffset.y*t.progress*.5,n=new p(this._cueOffset.x+e,this._cueOffset.y+i,this._cueOffset.z);this.cue.setPosition(n),R.inst.isOnline&&(this._cueSyncData||(this._cueSyncData={}),this._cueSyncData.power={x:n.x,y:n.y,z:n.z})},r.onDirectionChanged=function(t){this._lastSlideTime&&t.progress!=this._lastProgress||(this._lastSlideTime=Date.now(),this._slideLen=0);var e=t.progress-this._lastProgress;this._slideLen+=Math.abs(e);var i=Date.now()-this._lastSlideTime,n=1;if(i>0){var s=this._slideLen/i;n=Math.max(1,s/5e-4)}var a=45*e*n;this._lastProgress=t.progress;var l=this.cue.parent.eulerAngles,r=new p(l.x,l.y+a,l.z);this.cue.parent.eulerAngles=r,this.adjustIndicator(),R.inst.isOnline&&(this._cueSyncData||(this._cueSyncData={}),this._cueSyncData.direction={x:r.x,y:r.y,z:r.z})},r.onBtnHitBallClicked=function(){var t=this;if(!this._isBallMoveByHit){this._currentHitOrder++,this.indicatorWhiteBall.active=!1,this._isBallMoveByHit=!0,this._impulse=new p(120*this.powerSlider.progress,0,0),this._cueRot.set(this.cue.parent.eulerAngles);var e=b.degreesToRadians(this._cueRot.y);p.rotateY(this._impulse,this._impulse,this.whiteBall.getComponent(m).center,e),this.syncActionToServer(!0),this.clearPhysicsState();var i=D(this.cue).call((function(){t.doHitBall(t._impulse)}));D(this.cue).to(.1,{position:this._hitOffset},{easing:"cubicIn"}).then(i).start()}},r.getSyncData=function(t){for(var e=0;e<this._allBalls.length;e++){var i=this._allBalls[e],n=i.worldPosition,s=i.worldRotation;this._ballsPosData[3*e+0]=n.x,this._ballsPosData[3*e+1]=n.y,this._ballsPosData[3*e+2]=n.z,this._ballsQuatData[4*e+0]=s.x,this._ballsQuatData[4*e+1]=s.y,this._ballsQuatData[4*e+2]=s.z,this._ballsQuatData[4*e+3]=s.w}var a={ballsData:{ballsPosData:this._ballsPosData,ballsQuatData:this._ballsQuatData}};return t&&(a.hitImpulse={x:this._impulse.x,y:this._impulse.y,z:this._impulse.z}),a},r.syncActionToServer=function(t){if(R.inst.isOnline){var e=t,i=this.getSyncData(e);if(i.order=this._currentHitOrder,e)O.inst.sendMsg_HitBall(i);else{var n=i;if(this._currentHitOrder<=O.inst.order)return;this._hasPocketed?n.nextPlayer=O.inst.gameData.currentPlayer:n.nextPlayer=this.getNextTurnPlayer(),O.inst.sendMsg_HitBallComplete(n)}}},r.onEvent_HitComplete=function(){this.onTurnPlayerChanged()},r.onTurnPlayerChanged=function(){var t=O.inst.isMyTurn||!R.inst.isOnline;t&&this.adjustIndicator(),this.cue.active=!0,this.powerSlider.node.active=t,this.powerSlider.progress=0,this.cue.parent.setPosition(this.whiteBall.position),this.cue.setPosition(this._cueOffset.x,this._cueOffset.y,this._cueOffset.z),O.inst.gameData&&O.inst.cueDir?(this._cueRot.set(O.inst.cueDir),this.cue.parent.eulerAngles=this._cueRot):this._cueRot.set(this.cue.parent.eulerAngles),this.directionSlider.node.active=t,this.directionSlider.progress=.5},r.onEvent_HitBall=function(t,e){var i=this;if(!O.inst.isMyTurn){this._currentHitOrder=e,this.clearPhysicsState();var n=D(this.cue).call((function(){i.doHitBall(t)}));D(this.cue).to(.1,{position:this._hitOffset},{easing:"cubicIn"}).then(n).start()}},r.getNextTurnPlayer=function(){for(var t=O.inst.gameData.players,e=0;e<t.length;++e){if(t[e].uid==O.inst.gameData.currentPlayer)return t[(e+1)%t.length].uid}return t[0].uid},r.doHitBall=function(t){R.inst.isOnline&&this.doBallsDataSync(O.inst.gameData.ballsData),this.cue.active=!1,this.powerSlider.node.active=!1,this.directionSlider.node.active=!1;var e=new p(t.x,0,t.z);R.inst.isOnline&&!O.inst.isMyTurn||(this.whiteBall.getComponent(w).applyImpulse(e),z.reset(),this._needUpdatePhysics=!0);var i=e.length()/120;C.playOneShot("sounds/cue_hit",i)},r.checkGameOver=function(){for(var t=0,e=1;e<this._allBalls.length;++e)0==this._allBalls[e].active&&t++;return t>=15},r.clearPhysicsState=function(){this.whiteBall.getComponent(w).clearState();for(var t=0;t<this.beHitBalls.children.length;++t)this.beHitBalls.children[t].getComponent(w).clearState();g.instance.physicsWorld.syncSceneToPhysics()},r.setBallData=function(t,e){var i=this._allBalls[t],n=e.ballsPosData[3*t],s=e.ballsPosData[3*t+1],a=e.ballsPosData[3*t+2];i.setWorldPosition(n,s,a);var l=e.ballsQuatData[4*t],r=e.ballsQuatData[4*t+1],o=e.ballsQuatData[4*t+2],h=e.ballsQuatData[4*t+3];i.setWorldRotation(l,r,o,h),O.inst.isPocketed(t)&&(i.active=!1)},r.doBallsDataSync=function(t){for(var e=0;e<ft;++e)this.setBallData(e,t)},r.onEvent_CueChanged=function(t){O.inst.isMyTurn||(t.power&&this.cue.setPosition(t.power),t.direction&&(this.cue.parent.eulerAngles=t.direction))},r.update=function(t){this._lastSyncTime+=t,this._lastSyncTime>.1&&(this._cueSyncData&&(O.inst.sendMsg_AdjustCue(this._cueSyncData),this._cueSyncData=null),this._lastSyncTime=0)},r.onEvent_PostUpdate=function(){if(this._needUpdatePhysics&&(z.fixedUpdate(this._fixedDt),!this._isGameOver)){var t=this.checkGameOver();if(R.inst.isOnline){var e=this.getSyncData(!1);e.newPocketedBalls=this._newPocketedBallIds,this._newPocketedBallIds=[],t&&(e.gameOver=!0),O.inst.sendMsg_BallsDataSync(e)}else t&&tgx.UIAlert.show("你赢了，再来一局？",!0).onClick((function(t){t?tgx.SceneUtil.reloadScene():R.inst.exitRoom()}));this._isGameOver=t}I.collideWithBalls>0&&C.playOneShot("sounds/ball_hit_ball",I.collideWithBalls/100),I.collideWithBalls=0},e}(S)).prototype,"powerSlider",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(Z.prototype,"directionSlider",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(Z.prototype,"hitButton",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(Z.prototype,"cue",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(Z.prototype,"whiteBall",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(Z.prototype,"indicatorWhiteBall",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=e(Z.prototype,"beHitBalls",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(Z.prototype,"ballPrefab",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=e(Z.prototype,"tablePrefab",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=e(Z.prototype,"table",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=e(Z.prototype,"hitIndicator",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=e(Z.prototype,"pocketedBalls",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=Z))||J));r._RF.pop()}}}));

System.register("chunks:///_virtual/FixedPhysics.ts",["cc"],(function(e){var i,s,n,c;return{setters:[function(e){i=e.cclegacy,s=e.PhysicsSystem,n=e.director,c=e.Director}],execute:function(){i._RF.push({},"ffe25vEeDFNrLQL+yqVEDRl","FixedPhysics",void 0);var t=0,r=0,a=0;e("FixedPhysics",function(){function e(){}return e.reset=function(){t=0,r=0,a=0,s.instance.autoSimulation=!1,s.instance.fixedTimeStep=.01,s.instance.maxSubSteps=5},e.fixedUpdate=function(i){if(s.instance.physicsWorld)if(s.instance.enable){for(t=0,r+=i,n.emit(c.EVENT_BEFORE_PHYSICS);t<5;){if(!(a<600&&r>=s.instance.fixedTimeStep)){s.instance.physicsWorld.syncSceneToPhysics();break}s.instance.physicsWorld.syncSceneToPhysics(),s.instance.physicsWorld.step(s.instance.fixedTimeStep),s.instance.physicsWorld.emitEvents(),s.instance.physicsWorld.syncAfterEvents(),r-=s.instance.fixedTimeStep,t++,a++}600===a&&n.emit(e.EVENT_UPDATE_FINISHED),n.emit(c.EVENT_AFTER_PHYSICS)}else s.instance.physicsWorld.syncSceneToPhysics()},e}()).EVENT_UPDATE_FINISHED="FixedPhysics.EVENT_UPDATE_FINISHED",i._RF.pop()}}}));

System.register("chunks:///_virtual/GConst.ts",["cc"],(function(e){var o,t;return{setters:[function(e){o=e.cclegacy,t=e.Color}],execute:function(){o._RF.push({},"4b213dcoDhOaJRjAaCSeBSA","GConst",void 0);e("default",{MAX_FPS:45,resUrl:{joinRoom:"prefabs/joinRoom",userCenter:"prefabs/userCenter",gameRoom:"prefabs/gameRoom"},loginMgrChildUrl:{title:"Label Title",tips:"Label Tips",inputUserName:"Input UserName",inputPassWord:"Input PassWord",switchTypeBtnLabel:"Btn SwitchType/Background/Label"},hallMgrChildUrl:{hallMgr:"HallMgr",title:"Label Title",roomBtns:"RoomBtns"},joinRoomMgrChildUrl:{joinMgr:"JoinMgr",inputRoom:"Input RoomNumber"},colorList:[t.CYAN,t.GREEN,t.MAGENTA,t.GRAY,t.RED,t.YELLOW],hitBallNodeName:"whiteball"});o._RF.pop()}}}));

System.register("chunks:///_virtual/GEnum.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e.Enum}],execute:function(){t._RF.push({},"17b7eBYTPtJSqCYsrbFDEBM","GEnum",void 0);e("default",{pageFlag:n({common_Problem:0,tchnical_Proposal:1,tools_Techniques:2}),level:n({normal:0,hight:1}),viewType:n({icon:0,table:1}),userActionType:n({register:0,login:1}),ColliderGroup:n({DEFAULT:0,HOLE:2,BALL:4})});t._RF.pop()}}}));

System.register("chunks:///_virtual/HitIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n,r,o,l,a,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){o=i.cclegacy,l=i._decorator,a=i.Node,c=i.Component}],execute:function(){var s,u,h,p,L,f,d,b,v;o._RF.push({},"25780MKWLJFppktuJjAvyGk","HitIndicator",void 0);var y=l.ccclass,w=l.property;i("HitIndicator",(s=y("HitIndicator"),u=w(a),h=w(a),p=w(a),s((d=t((f=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return t=i.call.apply(i,[this].concat(o))||this,n(t,"hitLine",d,r(t)),n(t,"ballLine",b,r(t)),n(t,"whiteLine",v,r(t)),t}e(t,i);var o=t.prototype;return o.onLoad=function(){this.hideAll()},o.hideAll=function(){this.hitLine.active=!1,this.ballLine.active=!1,this.whiteLine.active=!1},o.setHitLine=function(i,t,e){this.setLine(this.hitLine,i,t,e)},o.setBallLine=function(i,t,e){this.setLine(this.ballLine,i,t,e)},o.setWhiteLine=function(i,t,e){this.setLine(this.whiteLine,i,t,e)},o.setLine=function(i,t,e,n){i.active=!0,i.setRotationFromEuler(0,t,0),i.setPosition(e);var r=i.children[0];r.setScale(n,1,1),r.setPosition(n/2-.5,0,0)},o.update=function(i){},t}(c)).prototype,"hitLine",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(f.prototype,"ballLine",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(f.prototype,"whiteLine",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=f))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/module_billiards",["./BallCollision.ts","./BilliardTableControl.ts","./HitIndicator.ts","./PocketTrigger.ts","./PocktedBalls.ts","./AudioPlayer.ts","./BallUVSetter.ts","./BilliardsGameHUD.ts","./BilliardsGameMgr.ts","./BilliardsLobbyScene.ts","./FixedPhysics.ts","./GConst.ts","./GEnum.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PocketTrigger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GEnum.ts"],(function(e){var t,r,o,n,i,c,s;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,o=e._decorator,n=e.Collider,i=e.director,c=e.Component},function(e){s=e.default}],execute:function(){var u,g;r._RF.push({},"144bdjqVxpE/4B70yUNwsaP","PocketTrigger",void 0);var l=o.ccclass;o.property,e("PocketTrigger",l("PocketTrigger")(((g=function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var o=r.prototype;return o.start=function(){this.initListener()},o.initListener=function(){this.getComponent(n).on("onTriggerEnter",this.onTriggerEnter)},o.onTriggerEnter=function(e){if(console.log("adfsadf"),e.otherCollider.getGroup()===s.ColliderGroup.BALL){var t=e.otherCollider;i.emit(r.EVENT_HIT_POCKET,t.node)}},r}(c)).EVENT_HIT_POCKET="PocketTrigger.hit_pocket",u=g))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/PocktedBalls.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BilliardsGameMgr.ts","./BallUVSetter.ts","./UserMgr.ts","./RoomMgr.ts"],(function(t){var e,i,l,r,a,n,s,o,d,c,h,f,P,u,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,l=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,s=t.Node,o=t.director,d=t.instantiate,c=t.Component},function(t){h=t.BilliardsGameMgr,f=t.BilliardsGameEvent},function(t){P=t.BallUVSetter},function(t){u=t.UserMgr},function(t){g=t.RoomMgr}],execute:function(){var p,y,B,v,k,_,m;a._RF.push({},"de46e7gvhxGm4KRfQY/XOEt","PocktedBalls",void 0);var b=n.ccclass,D=n.property;t("PocktedBalls",(p=b("PocktedBalls"),y=D(s),B=D(s),p((_=e((k=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,l(e,"leftPlayer",_,r(e)),l(e,"rightPlayer",m,r(e)),e._prefab=void 0,e}i(e,t);var a=e.prototype;return a.start=function(){this._prefab=this.leftPlayer.children[0],this.leftPlayer.active=!1,this.rightPlayer.active=!1,g.inst.isOnline&&h.inst.gameData?(h.inst.leftUserId&&this.initPocketedBalls(h.inst.leftUserId,this.leftPlayer,!1),h.inst.rightUserId&&this.initPocketedBalls(h.inst.rightUserId,this.rightPlayer,!0)):this.initPocketedBalls(u.inst.uid,this.leftPlayer,!1),o.on(f.PLAYER_DATA_CHANGED,this.onEvent_PlayerDataChanged,this)},a.onDestroy=function(){o.off(f.PLAYER_DATA_CHANGED,this.onEvent_PlayerDataChanged,this)},a.onEvent_PlayerDataChanged=function(t){var e=h.inst.getPlayer(t.uid);if(e&&e.pocketedBalls){var i=this.leftPlayer,l=t.uid==h.inst.rightUserId;l&&(i=this.rightPlayer);for(var r=i.children.length;r<e.pocketedBalls.length;++r)this.addPocketedBall(e.pocketedBalls[r],i,l)}},a.onPocket=function(t,e){t==h.inst.leftUserId||t==u.inst.uid?this.addPocketedBall(e,this.leftPlayer,!1):this.addPocketedBall(e,this.rightPlayer,!0)},a.initPocketedBalls=function(t,e,i){e.active=!0,e.removeAllChildren();var l=h.inst.getPlayer(t);if(l&&l.pocketedBalls)for(var r=0;r<l.pocketedBalls.length;++r)this.addPocketedBall(l.pocketedBalls[r],e,i)},a.addPocketedBall=function(t,e,i){var l=this._prefab.worldScale.x,r=l/10,a=i?-1:1,n=d(this._prefab),s=e.children.length;e.addChild(n),n.getComponent(P).ballId=t,n.setPosition(a*(l*s+r*s),0,0)},a.update=function(t){},e}(c)).prototype,"leftPlayer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(k.prototype,"rightPlayer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=k))||v));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/module_billiards', 'chunks:///_virtual/module_billiards'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});